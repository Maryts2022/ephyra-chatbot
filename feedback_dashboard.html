<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“Š Feedback Dashboard - Î•Ï†ÏÏÎ± Chatbot</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
      background: linear-gradient(135deg, #0a1929 0%, #1a2332 100%);
      color: #e3e8ef;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 10px 0px;
    }
    
    header {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 24px 32px;
      margin-bottom: 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    header h1 {
      font-size: 28px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #1e90ff 0%, #0c67c2 100%);
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(30, 144, 255, 0.3);
    }
    
    .btn-secondary {
      background: rgba(255,255,255,0.08);
      color: #e3e8ef;
      border: 1px solid rgba(255,255,255,0.15);
    }
    
    .btn-secondary:hover {
      background: rgba(255,255,255,0.12);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .stat-card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 20px;
      transition: transform 0.2s;
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
      border-color: rgba(255,255,255,0.2);
    }
    
    .stat-card h3 {
      font-size: 12px;
      font-weight: 600;
      color: #8aa4c0;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }
    
    .stat-value {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 6px;
    }
    
    .stat-change {
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .stat-change.positive { color: #20c997; }
    .stat-change.negative { color: #ff6b6b; }
    .stat-change.neutral { color: #8aa4c0; }
    
    .chart-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .chart-container {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 24px;
    }
    
    .chart-container h2 {
      font-size: 18px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    canvas {
      max-height: 300px;
    }
    
    .insights-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .insight-card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 24px;
    }
    
    .insight-card h3 {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .insight-list {
      list-style: none;
    }
    
    .insight-list li {
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .insight-list li:last-child {
      border-bottom: none;
    }
    
    .insight-list li strong {
      color: #1e90ff;
    }
    
    .feedback-table {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 24px;
      overflow: hidden;
    }
    
    .feedback-table h2 {
      font-size: 20px;
      margin-bottom: 20px;
    }
    
    .table-wrapper {
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    thead {
      background: rgba(255,255,255,0.05);
    }
    
    th {
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #8aa4c0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    td {
      padding: 12px 16px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      font-size: 13px;
    }
    
    tbody tr:hover {
      background: rgba(255,255,255,0.03);
    }
    
    .sentiment-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .sentiment-positive {
      background: rgba(32, 201, 151, 0.15);
      color: #20c997;
      border: 1px solid rgba(32, 201, 151, 0.3);
    }
    
    .sentiment-negative {
      background: rgba(255, 107, 107, 0.15);
      color: #ff6b6b;
      border: 1px solid rgba(255, 107, 107, 0.3);
    }
    
    .response-preview {
      max-width: 350px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      color: #b5c5d9;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #8aa4c0;
    }
    
    .filter-bar {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .filter-bar select {
      padding: 8px 14px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(255,255,255,0.05);
      color: #e3e8ef;
      font-size: 13px;
      cursor: pointer;
    }
    
    .filter-bar select:focus {
      outline: none;
      border-color: #1e90ff;
    }
    
    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }
      
      .chart-row {
        grid-template-columns: 1fr;
      }
      
      .insights-container {
        grid-template-columns: 1fr;
      }
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #0a1929 0%, #1a2332 100%);
      color: #e3e8ef;
      padding: 20px;
      min-height: 100vh;
    }
    .container { max-width: 1600px; margin: 0 auto; }
    
    header {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .section-title {
      font-size: 24px;
      margin: 40px 0 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #1e90ff;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .data-table-wrapper {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      overflow-x: auto; /* Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î¿ scroll Î±Î½ Î¿Î¹ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Î»Î­Ï‚ */
      margin-bottom: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .divide-line {
      background-color: rgba(28, 45, 68, 0.95);
      background: 1; /* Î Î¿Î»Ï ÎµÎ»Î±Ï†ÏÏ Î´Î¹Î¬Ï†Î±Î½Î¿ Î»ÎµÏ…ÎºÏŒ */
    backdrop-filter: blur(5px); /* Î•Ï†Î­ Î¸Î¿Î»ÏÎ¼Î±Ï„Î¿Ï‚ */
    border-top: 4px solid var(--primary); /* ÎœÎ¹Î± Î­Î½Ï„Î¿Î½Î· Î³ÏÎ±Î¼Î¼Î® ÏƒÏ„Î·Î½ ÎºÎ¿ÏÏ…Ï†Î® */
    border-radius:15px;
    padding: 30px;
    box-shadow: 0 -10px 40px rgba(0,0,0,0.5); /* Î£ÎºÎ¹Î¬ Ï€Î¿Ï… "ÏƒÏ€ÏÏÏ‡Î½ÎµÎ¹" Ï€ÏÎ¿Ï‚ Ï„Î± Ï€Î¬Î½Ï‰ */}

    table { width: 100%; border-collapse: collapse; min-width: 1200px; }
    th { 
      text-align: left; 
      padding: 15px; 
      background: rgba(255,255,255,0.07); 
      color: #8aa4c0; 
      font-size: 11px; 
      text-transform: uppercase;
      letter-spacing: 1px;
      border-bottom: 2px solid rgba(255,255,255,0.1);
    }
    td { padding: 12px 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 13px; }
    
    tr:hover { background: rgba(255,255,255,0.02); }

    .btn-refresh {
      background: #1e90ff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-refresh:hover { background: #0c67c2; transform: translateY(-2px); }

    .q-cell { text-align: center; font-weight: 600; color: #1e90ff; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>
        <span>ğŸ“Š</span>
        Dashboard Feedback - Î•Ï†ÏÏÎ±
      </h1>
      <div class="header-actions">
        <button class="btn btn-secondary" onclick="refreshData()">
          ğŸ”„ Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·
        </button>
        <button class="btn btn-primary" onclick="exportData()">
          ğŸ“¥ Export CSV
        </button>
        <button class="btn btn-secondary" onclick="clearAllFeedback()" style="background: rgba(255, 107, 107, 0.2); color: #ff6b6b; border-color: #ff6b6b;">
          ğŸ—‘ï¸ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚
        </button>
      </div>
    </header>
    
    <!-- KPIs Row -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Feedback</h3>
        <div class="stat-value" id="totalFeedback">-</div>
        <div class="stat-change neutral">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ 30 Î·Î¼Î­ÏÎµÏ‚</div>
      </div>
      
      <div class="stat-card">
        <h3>Satisfaction Rate</h3>
        <div class="stat-value" style="color: #1e90ff;" id="satisfactionRate">-</div>
        <div class="stat-change" id="sentimentTrend">-</div>
      </div>
      
      <div class="stat-card">
        <h3>Î˜ÎµÏ„Î¹ÎºÎ¬ ğŸ‘</h3>
        <div class="stat-value" style="color: #20c997;" id="positiveFeedback">-</div>
        <div class="stat-change positive" id="positivePercent">-</div>
      </div>
      
      <div class="stat-card">
        <h3>Î‘ÏÎ½Î·Ï„Î¹ÎºÎ¬ ğŸ‘</h3>
        <div class="stat-value" style="color: #ff6b6b;" id="negativeFeedback">-</div>
        <div class="stat-change negative" id="negativePercent">-</div>
      </div>
      
      <div class="stat-card">
        <h3>ÎœÎ­ÏƒÎ¿Ï‚ Î§ÏÏŒÎ½Î¿Ï‚ Î‘Ï€Î¬Î½Ï„Î·ÏƒÎ·Ï‚</h3>
        <div class="stat-value" id="avgResponseTime">-</div>
        <div class="stat-change neutral" id="responseTimeRange">-</div>
      </div>
      
      <div class="stat-card">
        <h3>ÎœÎ¿Î½Î±Î´Î¹ÎºÎ¿Î¯ Î§ÏÎ®ÏƒÏ„ÎµÏ‚</h3>
        <div class="stat-value" id="uniqueUsers">-</div>
        <div class="stat-change neutral" id="weeklyActive">-</div>
      </div>
    </div>
    
    <!-- Charts Row -->
    <div class="chart-row">
      <div class="chart-container">
        <h2>ğŸ“ˆ Î¤Î¬ÏƒÎ· Feedback (Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ 30 Î—Î¼Î­ÏÎµÏ‚)</h2>
        <canvas id="feedbackChart"></canvas>
      </div>
      
      <div class="chart-container">
        <h2>ğŸ—£ï¸ Î”Î¹Î±Î½Î¿Î¼Î® Î“Î»ÏÏƒÏƒÎ±Ï‚</h2>
        <canvas id="languageChart"></canvas>
      </div>
    </div>
    
    <!-- Insights Row -->
    <div class="insights-container">
      <div class="insight-card">
        <h3>ğŸ¯ ÎšÏÏÎ¹Î± Î ÏÎ¿Î²Î»Î®Î¼Î±Ï„Î±</h3>
        <ul class="insight-list" id="topIssuesList">
          <li><span class="loading">Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...</span></li>
        </ul>
      </div>
      
      <div class="insight-card">
        <h3>â“ Top Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚</h3>
        <ul class="insight-list" id="topQuestionsList">
          <li><span class="loading">Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...</span></li>
        </ul>
      </div>
      
      <div class="insight-card">
        <h3>ğŸ“Š Key Metrics</h3>
        <ul class="insight-list">
          <li>â±ï¸ Min Ï‡ÏÏŒÎ½Î¿Ï‚: <strong id="minTime">-</strong></li>
          <li>â±ï¸ Max Ï‡ÏÏŒÎ½Î¿Ï‚: <strong id="maxTime">-</strong></li>
          <li>ğŸ‘¥ Active (7Î·Î¼.): <strong id="weeklyMetric">-</strong></li>
        </ul>
      </div>
    </div>
    
    <!-- Feedback Table -->
    <div class="feedback-table">
      <h2>ğŸ“‹ Î ÏÏŒÏƒÏ†Î±Ï„Î± Feedback</h2>
      <div class="filter-bar">
        <select id="filterSentiment" onchange="filterTable()">
          <option value="all">ÎŒÎ»Î± Ï„Î± feedback</option>
          <option value="positive">ÎœÏŒÎ½Î¿ Î¸ÎµÏ„Î¹ÎºÎ¬ ğŸ‘</option>
          <option value="negative">ÎœÏŒÎ½Î¿ Î±ÏÎ½Î·Ï„Î¹ÎºÎ¬ ğŸ‘</option>
        </select>
        <select id="filterDays" onchange="refreshData()">
          <option value="7">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ 7 Î·Î¼Î­ÏÎµÏ‚</option>
          <option value="30" selected>Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ 30 Î·Î¼Î­ÏÎµÏ‚</option>
          <option value="90">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ 90 Î·Î¼Î­ÏÎµÏ‚</option>
        </select>
      </div>
      
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
    <th>ID</th>
    <th>Timestamp</th>
    <th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th><th>Q5</th>
    <th>Q6</th><th>Q7</th><th>Q8</th><th>Q9</th><th>Q10</th>
    <th>Q11</th><th>Q12</th><th>Q13</th><th>Q14</th><th>Q15</th>
    <th>Î£Ï‡ÏŒÎ»Î¹Î±</th>
  </tr>
          </thead>
          <tbody id="surveyTableBody">
            <tr>
              <td colspan="7" class="loading">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<div class="divide-line">
  <div class="container">
    <header>
      <h1>ğŸ“Š Dashboard Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Î‘Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½ Î•ÏÏ‰Ï„Î·Î¼Î±Ï„Î¿Î»Î¿Î³Î¯Î¿Ï…</h1>
      <button class="btn-refresh" onclick="loadSurveyResults()">ğŸ”„ Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· RESULTS</button>
    </header>

    <div class="data-table-wrapper">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</th>
            <th title="Î•ÏÏÏ„Î·ÏƒÎ· 1">Q1</th>
            <th title="Î•ÏÏÏ„Î·ÏƒÎ· 2">Q2</th>
            <th title="Î•ÏÏÏ„Î·ÏƒÎ· 3">Q3</th>
            <th title="Î•ÏÏÏ„Î·ÏƒÎ· 4">Q4</th>
            <th title="Î•ÏÏÏ„Î·ÏƒÎ· 5">Q5</th>
            <th title="Î•ÏÏÏ„Î·ÏƒÎ· 6">Q6</th>
            <th>Î£Ï‡ÏŒÎ»Î¹Î±</th>
          </tr>
        </thead>
        <tbody id="surveyTableBody">
          <tr><td colspan="9" style="text-align:center; padding: 40px; color: #8aa4c0;">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î±Ï€ÏŒ Railway...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
 <script>
    const API_URL = "";
    let allFeedbackData = [];

    // 1. Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î±Ï€ÏŒ Ï„Î¿ Î½Î­Î¿ endpoint /survey_results
    async function loadData() {
      try {
        const response = await fetch(`${API_URL}/survey_results`);
        
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        
        const data = await response.json();
        allFeedbackData = data;
        
        // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· KPIs (ÎšÎ±ÏÏ„Î­Î»ÎµÏ‚ ÏƒÏ„Î¿ Ï€Î¬Î½Ï‰ Î¼Î­ÏÎ¿Ï‚)
        document.getElementById('totalFeedback').textContent = data.length.toLocaleString('el-GR');
        document.getElementById('uniqueUsers').textContent = data.length.toLocaleString('el-GR');
        document.getElementById('satisfactionRate').textContent = '100%';
        
        // Update table
        updateTable(allFeedbackData);
        
      } catch (error) {
        console.error('Error:', error);
        const tbody = document.getElementById('feedbackTableBody');
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color: #ff6b6b; padding: 20px;">Î£Ï†Î¬Î»Î¼Î± ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ Î¼Îµ Ï„Î· Î²Î¬ÏƒÎ·</td></tr>';
      }
    }

    // 2. Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï‰Î½ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÏ‰Î½ Ï„Î¿Ï… ÎµÏÏ‰Ï„Î·Î¼Î±Ï„Î¿Î»Î¿Î³Î¯Î¿Ï… ÏƒÏ„Î¿Î½ Ï€Î¯Î½Î±ÎºÎ±
    function updateTable(feedbackData) {
      const tbody = document.getElementById('feedbackTableBody');
      if (!feedbackData || feedbackData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; padding: 20px;">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î±</td></tr>';
        return;
      }
      
      tbody.innerHTML = feedbackData.map(item => `
        <tr>
          <td>#${item.id}</td>
          <td><span class="sentiment-badge sentiment-positive">âœ… Survey</span></td>
          <td><div class="response-preview" title="${item.q1 || ''}">${escapeHtml(item.q1 || '-')}</div></td>
          <td><div class="response-preview" title="${item.q2 || ''}">${escapeHtml(item.q2 || '-')}</div></td>
          <td><div class="response-preview" title="${item.q3 || ''}">${escapeHtml(item.q3 || '-')}</div></td>
          <td><div class="response-preview" title="${item.q4 || ''}">${escapeHtml(item.q4 || '-')}</div></td>
          <td style="font-size: 0.85em; color: #8aa4c0;">${item.timestamp}</td>
        </tr>
      `).join('');
    }

    function filterTable() {
      updateTable(allFeedbackData);
    }

    function escapeHtml(text) {
      if (!text) return '-';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    async function refreshData() {
      await loadData();
    }

    async function exportData() {
      alert('Î— Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± ÎµÎ¾Î±Î³Ï‰Î³Î®Ï‚ CSV Î¸Î± Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÏ„ÎµÎ¯ ÏƒÏÎ½Ï„Î¿Î¼Î± Î³Î¹Î± Ï„Î¿ Survey.');
    }

    async function clearAllFeedback() {
      if (!confirm('âš ï¸ Î•Î¯ÏƒÏ„Îµ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Ï‚; Î‘Ï…Ï„ÏŒ Î¸Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÎ¹ ÎŸÎ›Î‘ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ Ï„Î¿ Railway!')) {
        return;
      }
      alert('Î— Î´Î¹Î±Î³ÏÎ±Ï†Î® Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ Î³Î¹Î± Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±.');
    }

    // Î‘ÏÏ‡Î¹ÎºÎ® Ï†ÏŒÏÏ„Ï‰ÏƒÎ·
    loadData();

    // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÎºÎ¬Î¸Îµ 20 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
    setInterval(refreshData, 20000);

    // Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· Î³Î¹Î± Î½Î± ÎºÎ±Î¸Î±ÏÎ¯Î¶ÎµÎ¹ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Î±Ï€ÏŒ Ï€ÎµÏÎ¯ÎµÏÎ³Î¿Ï…Ï‚ Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚ (Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±)
    function escapeHtml(text) {
      if (!text) return '-';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½ Î±Ï€ÏŒ Ï„Î¿ Railway
    async function loadSurveyResults() {
      try {
        const response = await fetch(`${API_URL}/survey_results`);
        if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
        
        const data = await response.json();
        const tbody = document.getElementById('surveyTableBody');
        
        if (!data || data.length === 0) {
          tbody.innerHTML = '<tr><td colspan="9" style="text-align:center; padding: 20px;">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Î¼Î­Î½Î± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± ÏƒÏ„Î· Î²Î¬ÏƒÎ·.</td></tr>';
          return;
        }

        tbody.innerHTML = data.map(item => `
          <tr>
             <td>#${item.id}</td>
            <td>${item.timestamp}</td>
              <td class="q-cell">${item.q1 || '-'}</td>
            <td class="q-cell">${item.q2 || '-'}</td>
            <td class="q-cell">${item.q3 || '-'}</td>
            <td class="q-cell">${item.q4 || '-'}</td>
            <td class="q-cell">${item.q5 || '-'}</td>
           <td class="q-cell">${item.q6 || '-'}</td>
            <td class="q-cell">${item.q7 || '-'}</td>
           <td class="q-cell">${item.q8 || '-'}</td>
           <td class="q-cell">${item.q9 || '-'}</td>
           <td class="q-cell">${item.q10 || '-'}</td>
           <td class="q-cell">${item.q11 || '-'}</td>
           <td class="q-cell">${item.q12 || '-'}</td>
            <td class="q-cell">${item.q13 || '-'}</td>
           <td class="q-cell">${item.q14 || '-'}</td>
           <td class="q-cell">${item.q15 || '-'}</td>
          <td>${item.comments || '-'}</td>
  </tr>
        `).join('');

      } catch (error) {
        console.error('Error fetching survey:', error);
        document.getElementById('surveyTableBody').innerHTML = 
          `<tr><td colspan="9" style="text-align:center; color: #ff6b6b; padding: 20px;">Î£Ï†Î¬Î»Î¼Î± ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚: ${error.message}</td></tr>`;
      }
    }
    
    // Î‘ÏÏ‡Î¹ÎºÎ® ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Î¼ÏŒÎ»Î¹Ï‚ Î±Î½Î¿Î¯Î¾ÎµÎ¹ Î· ÏƒÎµÎ»Î¯Î´Î±
    loadSurveyResults();

    // Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Î½Î±Î½Î­Ï‰ÏƒÎ· ÎºÎ¬Î¸Îµ 20 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
    setInterval(loadSurveyResults, 20000);
  </script>
</body>
</html>