<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Î”Î®Î¼Î¿Ï‚ ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½ â€“ Î•Ï€Î¯ÏƒÎ·Î¼Î· Î™ÏƒÏ„Î¿ÏƒÎµÎ»Î¯Î´Î± (Demo)</title>
  <meta name="description" content="Demo home page Î³Î¹Î± Ï„Î· Î´Î¹Ï€Î»Ï‰Î¼Î±Ï„Î¹ÎºÎ®: Î”Î®Î¼Î¿Ï‚ ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½ + Chatbot Î•Ï†ÏÏÎ±" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a1a2b; --bg2:#0e2239; --primary:#1e90ff; --primary-700:#0c67c2;
      --accent:#20c997; --muted:#8aa4c0; --surface:#0f1724; --card:#102036;
      --ring:rgba(255,255,255,.12); --radius:18px; --radius-lg:28px;
      --shadow:0 10px 30px rgba(0,0,0,.35); --shadow-soft:0 6px 18px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:#eef5ff; background:radial-gradient(1200px 600px at 70% 10%, #173656 0%, #0a1a2b 60%);
      line-height:1.5; letter-spacing:.2px;
    }
    a{color:inherit; text-decoration:none}

    .site-header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(10px);}
    .nav-wrap{max-width:1180px; margin:18px auto 0; padding:0 16px;}
    .nav{
      display:flex; align-items:center; gap:16px; justify-content:space-between;
      background:rgba(255,255,255,.06); border:1px solid var(--ring);
      padding:10px 14px; border-radius:40px; box-shadow:var(--shadow-soft);
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.4px}
    .brand-logo{width:32px; height:40px; border-radius:8px; background:linear-gradient(180deg,#ffd778,#e0a34b);
      position:relative; box-shadow:inset 0 0 0 2px rgba(0,0,0,.15), 0 3px 9px rgba(0,0,0,.25);}
    .brand-logo:before{content:""; position:absolute; inset:6px; border-radius:4px; background:linear-gradient(180deg,#3967b7,#203a73);}
    .brand small{opacity:.8; font-weight:600}
    .menu{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .menu a{padding:10px 14px; border-radius:999px; border:1px solid transparent}
    .menu a:hover{background:rgba(255,255,255,.08); border-color:var(--ring)}
    .menu .chevron{opacity:.7}
    .lang{display:flex; align-items:center; gap:6px; padding:8px 12px; border:1px solid var(--ring); border-radius:999px;}
    .lang-toggle-btn{
      background:none; border:1px solid #e3e7ee; color:#1a2a41; 
      font-weight:600; padding:6px 14px; border-radius:10px; 
      cursor:pointer; transition:all .3s ease;
      font-size:13px; letter-spacing:.2px;
    }
    .lang-toggle-btn:hover{background:rgba(30,144,255,.08); border-color:#1e90ff;}
    .lang-toggle-btn.el-active{background:#1e90ff; color:#fff; border-color:#1e90ff;}
    .lang-toggle-btn.en-active{background:transparent; color:#1a2a41; border-color:#e3e7ee;}
    
    /* Accessibility Button Styles */
    .accessibility-btn {
      background: transparent;
      border: none;
      color: #1a2a41;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: all .3s ease;
      font-size: 28px;
      margin-left: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .accessibility-btn:hover {
      background: transparent;
      border: none;
      transform: scale(1.05);
    }
    .accessibility-btn:focus {
      outline: none;
    }
    
    /* Accessibility Panel */
    .accessibility-panel {
      position: fixed;
      bottom: 250px;
      right: 22px;
      width: 280px;
      background: #ffffff;
      border: 2px solid #003366;
      border-radius: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      padding: 16px;
      z-index: 100;
      display: none;
    }
    .accessibility-panel.open {
      display: block;
      animation: slideIn 0.3s ease;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    .accessibility-panel h3 {
      color: #003366;
      margin: 0 0 12px 0;
      font-size: 16px;
      border-bottom: 2px solid #003366;
      padding-bottom: 8px;
    }
    .accessibility-option {
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px;
      background: #f8fbff;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .accessibility-option:hover {
      background: #e8f2ff;
    }
    .accessibility-option label {
      color: #1a2a41;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .toggle-switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: #ccc;
      border-radius: 24px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .toggle-switch input {
      display: none;
    }
    .toggle-switch.active {
      background: #1e90ff;
    }
    .toggle-slider {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .toggle-switch.active .toggle-slider {
      transform: translateX(20px);
    }
    
    /* High Contrast Mode */
    body.high-contrast {
      background: #000000 !important;
    }
    body.high-contrast .chat-panel {
      background: #000000;
      border: 2px solid #ffffff;
    }
    body.high-contrast .chat-header {
      background: #ffffff;
      color: #000000;
    }
    body.high-contrast .msg.user {
      background: #ffffff;
      color: #000000;
      border-color: #ffffff;
    }
    body.high-contrast .msg.bot {
      background: #000000;
      color: #ffffff;
      border: 2px solid #ffffff;
    }
    body.high-contrast .chat-input {
      background: #000000;
      color: #ffffff;
      border: 2px solid #ffffff;
    }
    
    /* Large Text Mode */
    body.large-text {
      font-size: 120%;
    }
    body.large-text .msg {
      font-size: 16px;
    }
    body.large-text .chat-input {
      font-size: 18px;
    }

    .hero{position:relative; min-height:62vh; display:grid; place-items:center; overflow:hidden;}
    .hero::before{
      content:""; position:absolute; inset:0; background:url('https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2000&auto=format&fit=crop') center/cover no-repeat;
      filter:brightness(.55) saturate(1.1);
    }
    .hero::after{content:""; position:absolute; inset:0; background:radial-gradient(1000px 400px at 70% 10%, transparent, rgba(10,26,43,.55));}
    .hero-inner{position:relative; z-index:1; text-align:left; width:100%; max-width:980px; padding:0 16px;}
    .hero h1{font-size:clamp(28px,5vw,54px); margin:.2em 0 .5em; line-height:1.05;}
    .search{display:flex; align-items:center; gap:10px; padding:10px; border-radius:40px; background:rgba(255,255,255,.08);
      border:1px solid var(--ring); box-shadow:var(--shadow-soft); max-width:720px;}
    .search input{flex:1; background:transparent; border:0; outline:none; color:#fff; font-size:16px; padding:12px 6px;}
    .search button{background:var(--primary); border:0; color:#fff; padding:12px 18px; border-radius:999px; font-weight:600; cursor:pointer}
    .search button:hover{background:var(--primary-700)}

    .services{max-width:1100px; margin:-40px auto 80px; padding:0 16px; position:relative; z-index:2}
    .cards{display:grid; grid-template-columns:repeat(3,1fr); gap:18px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--ring); border-radius:var(--radius-lg); padding:22px; box-shadow:var(--shadow-soft);
      display:flex; flex-direction:column; align-items:flex-start; gap:14px; min-height:160px;
      transition:transform .2s ease, background .2s ease, box-shadow .2s ease;
    }
    .card:hover{transform:translateY(-2px); box-shadow:var(--shadow)}
    .icon{
      width:34px; height:34px; border-radius:50%; display:grid; place-items:center;
      background:radial-gradient(circle at 30% 30%, #3fd0ff, #1c8fff 60%, #176ed8 100%);
      outline:3px solid rgba(255,255,255,.15);
    }
    .card h3{margin:0; font-size:18px}
    .card p{margin:0; color:var(--muted); font-size:14px}

    .section-title{display:flex; align-items:center; justify-content:space-between; margin:32px 0 18px}
    .section-title h2{margin:0; font-size:22px; letter-spacing:.4px}

    footer{border-top:1px solid var(--ring); background:rgba(255,255,255,.04);}
    .ft{max-width:1100px; margin:0 auto; padding:22px 16px; color:#bcd}

    .chat-helper{
       position:fixed; bottom:155px; right:26px; z-index:60;
  background:#ffffff; color:#1b2a41; padding:8px 12px; border-radius:14px;
  border:1px solid #e3e7ee; box-shadow:0 4px 12px rgba(0,0,0,.25);
  font-size:14px; user-select:none; display:none;
    }
    .chat-launcher{
    position:fixed; bottom:22px; right:22px; z-index:60;
  width:96px; height:128px; cursor:pointer;
  background:transparent; border:none; border-radius:18px;
  display:flex; align-items:center; justify-content:center;
  box-shadow:none;    /* âœ¨ Ï‡Ï‰ÏÎ¯Ï‚ Ï†Ï‰Ï‚/ÏƒÎºÎ¹Î¬ */
  transition:transform .08s ease, filter .2s ease;
  overflow: visible !important;
}
.chat-launcher:hover{ box-shadow:0 0 18px rgba(255,102,0,.35); filter:saturate(1.05) }
.chat-launcher:active{ transform:scale(.98) }

/* The portrait image (sticker) */
.chat-launcher img{
   width: 100%;
  height: auto;
  max-height: 100%;
  object-fit: contain;
  object-position: center bottom;
  border: none !important;             /* âœ¨ Ï‡Ï‰ÏÎ¯Ï‚ Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± */
  border-radius: 0 !important;         /* âœ¨ ÎºÎ±Î¼Î¯Î± ÎºÎ±Î¼Ï€ÏÎ»Î· Ï€Î¿Ï… Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Î»ÎµÏ…ÎºÏŒ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ */
  background: transparent !important;  /* âœ¨ Ï€Î»Î®ÏÎ·Ï‚ Î´Î¹Î±Ï†Î¬Î½ÎµÎ¹Î± */
  box-shadow: none !important;         /* âœ¨ Ï‡Ï‰ÏÎ¯Ï‚ ÏƒÎºÎ¹Î¬ */
  outline: none !important;            /* âœ¨ Ï‡Ï‰ÏÎ¯Ï‚ Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± ÎµÏƒÏ„Î¯Î±ÏƒÎ·Ï‚ */
}

/* Optional gentle pulse when speaking (class can be toggled by existing code) */
.chat-launcher.speaking img{
  animation: stickerPulse 1.6s ease-in-out infinite;
}
@keyframes stickerPulse{
  0%,100%{ transform:scale(1); box-shadow:inset 0 0 0 2px rgba(255,255,255,.9); }
  50%{ transform:scale(1.02); box-shadow:inset 0 0 0 2px rgba(255,255,255,.9), 0 0 12px rgba(255,140,0,.55); }
}

    @keyframes ephyrWobble {
      0%   { transform: translateX(0) rotate(0deg); }
      15%  { transform: translateX(-2px) rotate(-3deg); }
      30%  { transform: translateX(2px) rotate(3deg); }
      45%  { transform: translateX(-1px) rotate(-2deg); }
      60%  { transform: translateX(1px) rotate(2deg); }
      100% { transform: translateX(0) rotate(0); }
    }

    .chat-launcher.wiggle { animation: ephyrWobble 0.9s ease-in-out 1; }
    @media (prefers-reduced-motion: reduce) { .chat-launcher.wiggle { animation: none; } }

    .chat-panel{
      position:fixed; bottom:110px; right:22px; width:360px; height:590px; z-index:70;
      background:#ffffff; border:2px solid #003366; border-radius:14px;
      box-shadow:0 16px 36px rgba(0,0,0,.35); display:none; flex-direction:column; overflow:hidden;
      transform-origin:bottom right;
    }
    .chat-panel.open{ animation:chatPopIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
    @keyframes chatPopIn {
      0% { opacity:0; transform:scale(0.8) translateY(20px); }
      100% { opacity:1; transform:scale(1) translateY(0); }
    }
    .chat-header{
      background:#003366; color:#fff; padding:10px 12px; font-weight:700;
      display:flex; align-items:center; justify-content:space-between;
    }
    .chat-header-title{flex:1; line-height:1.2}
    .chat-header-buttons{display:flex; gap:8px; align-items:center}
    .chat-header button{background:none; border:0; color:#fff; font-size:18px; cursor:pointer; padding:4px 8px; border-radius:4px; transition:background .2s}
    .chat-header button#accessibilityHeaderBtn{font-size:28px}
    .chat-header button:hover{background:rgba(255,255,255,.15)}
    .chat-header button.active{background:rgba(255,255,255,.25)}
    .chat-messages{flex:1; padding:12px; overflow:auto; background:#f8fbff}
    .msg{margin: 6px 0;
  padding: 8px 10px;
  border-radius: 10px;
  max-width: 80%;
  font-size: 14px;
  /* âœ¨ Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—: Î‘Î½Î±Î³ÎºÎ¬Î¶ÎµÎ¹ Ï„Î± Î¼ÎµÎ³Î¬Î»Î± links Î½Î± Î±Î»Î»Î¬Î¶Î¿Ï…Î½ Î³ÏÎ±Î¼Î¼Î® */
  word-wrap: break-word;
  overflow-wrap: break-word;}
    .msg.bot{
      background:#99bbeb; align-self:flex-start; border-left:4px solid #003366;
      color:#0b2239; font-weight:500; transition: box-shadow 0.3s ease;
    }
    .msg.bot.speaking{
      animation: speechPulse 1.5s ease-in-out infinite;
    }
    @keyframes speechPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(30, 144, 255, 0.4); }
      50% { box-shadow: 0 0 0 8px rgba(30, 144, 255, 0), 0 0 15px rgba(30, 144, 255, 0.3); }
    }
    .msg.user{background:#f8a251; align-self:flex-end; border-right:4px solid #ff6600; color:#1a1a1a; font-weight:500}
    .msg.typing{opacity:.8; font-style:italic}
    .msg.typing::after{
      content:''; display:inline-block; width:20px;
      animation:typingDots 1.4s infinite;
    }
    @keyframes typingDots {
      0%, 20% { content:'.'; }
      40% { content:'..'; }
      60%, 100% { content:'...'; }
    }
    .msg.error{background:#ffe5e5; border-left:4px solid #cc0000; color:#660000}
    .msg.disclaimer{background:#fff3cd; border-left:4px solid #ffc107; color:#856404; font-size:13px; max-width:95%}
    
    /* ğŸ‘ Feedback buttons container */
    .msg-feedback{
      display:flex; gap:7px; margin-top:7px; margin-left:0; padding-top:8px;
      boarder-top:1px solid rgba(0, 51, 102, 0.1); justify-content: flex-start;
    }
    .feedback-btn{
  background: transparent !important; /* Î Î»Î®ÏÎ·Ï‚ Î´Î¹Î±Ï†Î¬Î½ÎµÎ¹Î± */
  border: none !important;            /* ÎšÎ±Î¸ÏŒÎ»Î¿Ï… Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± */
  box-shadow: none !important;        /* ÎšÎ±Î¼Î¯Î± ÏƒÎºÎ¹Î¬ */
  font-size: 18px;
  cursor: pointer;
  opacity: 0.6;                       /* Î›Î¯Î³Î¿ Ï€Î¹Î¿ Î±Ï‡Î½ÏŒ Î³Î¹Î± Î½Î± Î¼Î·Î½ ÎºÎ¿Ï…ÏÎ¬Î¶ÎµÎ¹ */
  transition: transform 0.2s ease, opacity 0.2s ease;
  padding: 4px;
  display: inline-flex;
  outline: none !important;           /* Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Ï„Î¿Ï… Î¼Ï€Î»Îµ Ï€Î»Î±Î¹ÏƒÎ¯Î¿Ï… ÏƒÏ„Î¿ ÎºÎ»Î¹Îº */
    }
    
    .feedback-btn:hover{
     transform: scale(1.2);       /* ÎœÎµÎ³Î­Î¸Ï…Î½ÏƒÎ· ÏƒÏ„Î¿ hover Î³Î¹Î± Î­Î¼Ï†Î±ÏƒÎ· */
     opacity: 1;                  /* Î Î»Î®ÏÎ·Ï‚ Î¿ÏÎ±Ï„ÏŒÏ„Î·Ï„Î± ÏƒÏ„Î¿ hover */
     background: none !important; /* Î”Î¹Î±ÏƒÏ†Î¬Î»Î¹ÏƒÎ· ÏŒÏ„Î¹ Î´ÎµÎ½ Î¸Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„ÎµÎ¯ Ï†ÏŒÎ½Ï„Î¿ */
    }

    .feedback-btn.active{
     opacity: 1;
      transform: scale(1.2);
    }
    
    /* ğŸ’¬ Feedback tooltip */
    .feedback-tooltip{
      position:fixed; bottom:220px; right:26px; z-index:80;
      background:#003366; color:#fff; padding:12px 14px;
      border-radius:10px; font-size:13px; box-shadow:0 4px 12px rgba(0,0,0,.3);
      max-width:200px; line-height:1.4; animation:tooltipFadeIn .3s ease;
    }
    @keyframes tooltipFadeIn {
      0% { opacity:0; transform:translateY(10px); }
      100% { opacity:1; transform:translateY(0); }
    }
    @keyframes tooltipFadeOut {
      0% { opacity:1; transform:translateY(0); }
      100% { opacity:0; transform:translateY(10px); }
    }
    .feedback-tooltip.fade-out{
      animation:tooltipFadeOut .3s ease forwards;
    }
    .chat-input{display:flex; gap:8px; padding:10px; border-top:1px solid #e6eef7; background:#fff; flex-direction:column}
    .chat-input-row{display:flex; gap:8px}
    .chat-input input{flex:1; padding:10px; border:1px solid #ced8ea; border-radius:10px; font-size:14px}
    .chat-input input:focus{outline:2px solid #80bfff; border-color:#80bfff}
    .chat-input input:disabled{background:#f5f5f5; cursor:not-allowed}
    .chat-input button{padding:10px 14px; background:#ff6600; border:0; color:#fff; border-radius:10px; cursor:pointer; font-weight:700}
    .chat-input button:hover:not(:disabled){background:#003366}
    .chat-input button:disabled{background:#ccc; cursor:not-allowed}
    .quick-replies{display:flex; gap:6px; flex-wrap:wrap; margin-top:4px}
    .lang-toggle-btn{border:1px solid #003366; color:#003366; font-weight:600; padding:8px 10px; border-radius:8px; background:#fff; cursor:pointer; transition:all .2s ease; font-size:18px;}
    .lang-toggle-btn:hover{background:#003366; color:#fff; transform:translateY(-1px); box-shadow:0 2px 6px rgba(0,51,102,.25)}
    .quick-reply-btn{
      padding:8px 14px; background:#fff; border:.5px solid #003366; color:#003366;
      border-radius:20px; font-size:13px; cursor:pointer; font-weight:600; transition:all .2s ease;
    }
    .quick-reply-btn:hover{background:#003366; color:#fff; transform:translateY(-1px); box-shadow:0 2px 6px rgba(0,51,102,.25)}

    
  /* --- 1. RESPONSIVE UI (ÎŸÎ›Î‘ ÎœÎ‘Î–Î™ Î•Î”Î©) --- */
/* --- 1. RESPONSIVE UI (ÎŸÎ›Î‘ ÎœÎ‘Î–Î™ Î•Î”Î©) --- */
@media (max-width:900px){ 
    .cards{grid-template-columns:repeat(2,1fr)} 
}

@media (max-width:600px){
    .menu{display:none}
    .cards{grid-template-columns:1fr}
    .hero{min-height:50vh}

    .chat-panel {
        height: 82vh !important; 
        width: 94% !important; 
        right: 3% !important; 
        left: 3% !important; 
        bottom: 85px !important;
        border-radius: 20px !important;
        box-shadow: 0 10px 40px rgba(0,0,0,0.5) !important;
    }

    #chatField {
        font-size: 16px !important; 
        padding: 14px !important;
    }

    .msg {
        max-width: 88% !important;
        font-size: 15px !important;
    }

    .chat-header {
        padding: 15px !important;
    }

    /* ÎœÎµÏ„Î±Ï†Î­ÏÎ±Î¼Îµ Ï„Î¿ accessibility panel Î•Î”Î© ÎœÎ•Î£Î‘ Î³Î¹Î± Î½Î± Î´Î¿Ï…Î»ÎµÏÎµÎ¹ Î¼ÏŒÎ½Î¿ ÏƒÏ„Î± ÎºÎ¹Î½Î·Ï„Î¬ */
    .accessibility-panel {
        width: 90% !important;
        right: 5% !important;
        left: 5% !important;
        bottom: 100px !important;
        box-sizing: border-box !important;
    }
    .accessibility-panel h3 { font-size: 1.1rem !important; }
    .accessibility-panel button { padding: 12px !important; font-size: 14px !important; }
}

/* --- 2. Î£Î¤Î¥Î› ÎœÎ—ÎÎ¥ÎœÎ‘Î¤Î©Î & ÎšÎŸÎ¥ÎœÎ Î™Î©Î (Î“Î™Î‘ ÎŸÎ›Î•Î£ Î¤Î™Î£ Î£Î¥Î£ÎšÎ•Î¥Î•Î£) --- */
.msg.bot .quick-reply-btn{
  background:#f7fbff;
  border:1px solid #cfe0f5;
  color:#123d7a;
  border-radius:10px;
  box-shadow:none;
  font-weight:400;
  font-size:14px;
}

.msg.bot .quick-reply-btn:hover{
  background:#eaf3ff;
  border-color:#bdd5ff;
  transform:none;
  box-shadow:0 1px 2px rgba(0,0,0,.06);
}

/* ÎšÎ±Î¸Î±ÏÏŒ ÏƒÏ„Ï…Î» Î³Î¹Î± Ï„Î± Quick Replies */
#quickReplies {
  display: flex !important;
  flex-direction: row !important;
  justify-content: flex-start !important;
  align-items: center !important;
  flex-wrap: wrap !important;
  gap: 10px !important;
  margin-top: 4px;
  overflow: hidden;
}

#quickReplies .quick-reply-btn {
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  margin: 0 !important;
}

/* --- 3. Î›ÎŸÎ™Î Î‘ Î£Î¤ÎŸÎ™Î§Î•Î™Î‘ (Î“Î›Î©Î£Î£Î‘, CARDS ÎšÎ›Î ) --- */
#chatLangSwitch .lang-btn{
  color:#123d7a !important;
  background:#fff !important;
  border:1px solid #d0d7de;
  border-radius:10px;
  padding:6px 10px;
  font-weight:600;
  font-size:13px;
  line-height:1;
}
#chatLangSwitch .lang-btn .flag{ margin-right:6px; }
#chatLangSwitch .lang-btn.active{ outline:2px solid #ff7a00; }

.scenario-content{ display:none; }
.scenario-content.open{ display:block; }
.card.questionnaire { grid-column: 2; }
.card-header{ display:flex; align-items:center; gap:12px; }
</style>
</head>
<body>
  <header class="site-header">
    <div class="nav-wrap">
      <nav class="nav" aria-label="ÎšÏÏÎ¹Î¿ Î¼ÎµÎ½Î¿Ï">
        <a class="brand" href="#" aria-label="Î‘ÏÏ‡Î¹ÎºÎ®">
          <span class="brand-logo" aria-hidden="true"></span>
          <span>Î”Î—ÎœÎŸÎ£ ÎšÎŸÎ¡Î™ÎÎ˜Î™Î©Î<br><small>Î•Ï€Î¯ÏƒÎ·Î¼Î¿Ï‚ Î™ÏƒÏ„ÏŒÏ„Î¿Ï€Î¿Ï‚ â€“ Demo</small></span>
        </a>
        <div class="menu" role="menubar">
          <a role="menuitem" href="#">Î‘ÏÏ‡Î¹ÎºÎ®</a>
          <a role="menuitem" href="#">Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· <span class="chevron">â–¾</span></a>
          <a role="menuitem" href="#">Î”Î®Î¼Î¿Ï‚ <span class="chevron">â–¾</span></a>
          <a role="menuitem" href="#">Î•Î¾Ï…Ï€Î·ÏÎ­Ï„Î·ÏƒÎ· <span class="chevron">â–¾</span></a>
          <a role="menuitem" href="#">Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±</a>
        </div>
        <div class="lang" aria-label="Î“Î»ÏÏƒÏƒÎ±"><span aria-hidden="true">ğŸ‡¬ğŸ‡·</span><span>Î•Î»Î»Î·Î½Î¹ÎºÎ¬</span></div>
      </nav>
    </div>
  </header>

  <section class="hero" aria-labelledby="welcomeTitle">
    <div class="hero-inner">
      <h1 id="welcomeTitle">ÎšÎ±Î»ÏÏ‚ Î®Î»Î¸Î±Ï„Îµ ÏƒÏ„Î¿Î½ Î”Î®Î¼Î¿ ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½</h1>
      <form class="search" role="search" aria-label="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î´Î®Î¼Î¿Ï…" onsubmit="event.preventDefault();">
        <input type="search" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·â€¦" aria-label="ÎŒÏÎ¿Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚" />
        <button type="submit" aria-label="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·">ğŸ”</button>
      </form>
    </div>
  </section>

  <main class="services" aria-labelledby="servicesTitle">
    <div class="section-title">
      <h2 id="servicesTitle">Î£ÎµÎ½Î¬ÏÎ¹Î± Î¥Î»Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚ Î³Î¹Î± Ï„Î¿Î½ Î§ÏÎ®ÏƒÏ„Î·</h2>
      
    </div>
    <div class="cards" role="list">
      <article class="card" role="listitem" aria-label="CityCertify">
        <div class="card-header">
        <div class="icon" aria-hidden="true">ğŸ™ï¸</div>
       <h3 class="scenario-title" style="cursor:pointer;">1<sup>Î¿</sup> Î£ÎµÎ½Î¬ÏÎ¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h3>
     </div>
       <p style="text-align: center;">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Î¼Î­ÏƒÏ‰ Î­Ï„Î¿Î¹Î¼Î¿Ï… Î¼ÎµÎ½Î¿Ï</p>

<div class="scenario-content" style="margin-top:12px;">
  <p><strong>Î£ÎµÎ½Î¬ÏÎ¹Î¿ Ï‡ÏÎ®ÏƒÎ·Ï‚:</strong></p>
  <p>ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹ Î±Ï€ÏŒ Ï„Î¿ Î¼ÎµÎ½Î¿Ï Ï„Î·Î½ ÎµÏÏÏ„Î·ÏƒÎ·:
    <br>1.Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ Î³Î­Î½Î½Î·ÏƒÎ·Ï‚ Î³Î¹Î± ÎµÎ½Î®Î»Î¹ÎºÎ±; </p>
  <p>Î‘Ï†Î¿Ï Î»Î¬Î²ÎµÎ¹ Ï„Î·Î½ Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·, ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹ Ï„Î· Î´ÎµÏÏ„ÎµÏÎ· ÎµÏÏÏ„Î·ÏƒÎ·:
    <br>2.Î Î¿Ï Î³Î¯Î½ÎµÏ„Î±Î¹ Î· Î´Î®Î»Ï‰ÏƒÎ· Î³Î¬Î¼Î¿Ï…;</p>
</div>

      </article>
      <article class="card" role="listitem" aria-label="DigiHub">
        <div class="card-header">
        <div class="icon" aria-hidden="true">ğŸ—‚ï¸</div>
        <h3 class="scenario-title" style="cursor:pointer;">2<sup>Î¿</sup> Î£ÎµÎ½Î¬ÏÎ¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h3>
      </div>
        <p style="text-align: center;">Î•Î»ÎµÏÎ¸ÎµÏÎ· Ï€Î»Î·ÎºÏ„ÏÎ¿Î»ÏŒÎ³Î·ÏƒÎ· Î²Î±ÏƒÎ¹ÎºÏÎ½ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚ & Î´Î¹Î¿Î¯ÎºÎ·ÏƒÎ·Ï‚</p>
        <div class="scenario-content" style="margin-top:12px;">
  <p><strong>Î£ÎµÎ½Î¬ÏÎ¹Î¿ Ï‡ÏÎ®ÏƒÎ·Ï‚:</strong></p>
  
  <p>ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¸Î­ÏƒÎµÎ¹ Î¼Î¯Î± Î® Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Î±Ï€ÏŒ Ï„Î¹Ï‚ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚
    (ÎµÎ»ÎµÏÎ¸ÎµÏÎ± Î´Î¹Î±Ï„Ï…Ï€Ï‰Î¼Î­Î½ÎµÏ‚):
  </p>
  
    <p>1.Î£Îµ Ï€Î¿Î¹Î± Î¿Î´ÏŒ Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ Ï„Î¿ Î”Î·Î¼Î±ÏÏ‡ÎµÎ¯Î¿ ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…;</p>
    <p>2.Î Î¿Î¹Î¿ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Ï„Î·Î»Î­Ï†Ï‰Î½Î¿ Ï„Î¿Ï… Î”Î·Î¼Î±ÏÏ‡ÎµÎ¯Î¿Ï…;</p>
    <p>3.Î Î¿Î¹Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿ Î”Î®Î¼Î±ÏÏ‡Î¿Ï‚;</p>
    <p>4.Î Î¿Î¹Î¿Î¹ ÎµÎ¯Î½Î±Î¹ Î¿Î¹ Î‘Î½Ï„Î¹Î´Î®Î¼Î±ÏÏ‡Î¿Î¹;</p>
    <p>5.Î Î¿Î¹Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿ Î‘Î½Ï„Î¹Î´Î®Î¼Î±ÏÏ‡Î¿Ï‚ ÎšÎ±Î¸Î±ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚;</p>
 
</div>
      </article>
      <article class="card" role="listitem" aria-label="Î”Î£.live">
        <div class="card-header">
        <div class="icon" aria-hidden="true">ğŸ“º</div>
        <h3 class="scenario-title" style="cursor:pointer;">3<sup>Î¿</sup> Î£ÎµÎ½Î¬ÏÎ¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h3>
      </div>
         <p style="text-align: center;">Î•Î»ÎµÏÎ¸ÎµÏÎ· Î´Î¹Î±Ï„ÏÏ€Ï‰ÏƒÎ· ÎµÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½ Î³Î¹Î± Î´Î·Î¼Î¿Ï„Î¹ÎºÎ­Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ & Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯ÎµÏ‚</p>
        <div class="scenario-content" style="margin-top:12px;">
  <p><strong>Î£ÎµÎ½Î¬ÏÎ¹Î¿ Ï‡ÏÎ®ÏƒÎ·Ï‚:</strong></p>
  <p>1.Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Î Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ ÎŸÎ¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÎ®Ï‚ ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚;</p>
   <p> 2.Î ÏÏ‚ Î³Î¯Î½ÎµÏ„Î±Î¹ Î· Î¼ÎµÏ„Î±Î´Î·Î¼ÏŒÏ„ÎµÏ…ÏƒÎ·; Î¤Î¹ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î³Î½Ï‰ÏÎ¯Î¶Ï‰;</p>
    <p>3.Î¤Î¹ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î³Î¹Î± Î½Î± ÎºÎ¬Î½Ï‰ Î±Î»Î»Î±Î³Î® ÎµÎºÎ»Î¿Î³Î¹ÎºÎ¿Ï Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚;</p>
    <p>4.Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Î›Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ® Î ÏÎ¬Î¾Î· Î“Î­Î½Î½Î·ÏƒÎ·Ï‚;</p>
  </p>
</div>
      </article>
      <article class="card" role="listitem" aria-label="CityOpinion">
        <div class="card-header">
        <div class="icon" aria-hidden="true">ğŸ’¬</div>
        <h3 class="scenario-title" style="cursor:pointer;">4<sup>Î¿</sup> Î£ÎµÎ½Î¬ÏÎ¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h3>
      </div>
        <p style="text-align: center;">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Î³Î¹Î± ÎšÎ•Î , Î´Î·Î¼Î¿Ï„Î¹ÎºÎ­Ï‚ Î´Î¿Î¼Î­Ï‚ ÎºÎ±Î¹ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚</p>
        <div class="scenario-content" style="margin-top:12px;">
  <p><strong>Î£ÎµÎ½Î¬ÏÎ¹Î¿ Ï‡ÏÎ®ÏƒÎ·Ï‚:</strong></p>
  <p>Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Î³Î¹Î± ÎšÎ•Î , Î´Î·Î¼Î¿Ï„Î¹ÎºÎ­Ï‚ Î´Î¿Î¼Î­Ï‚ ÎºÎ±Î¹ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚</p>
  <p>
    <p>1.Î¤Î¹ ÎµÎ¯Î½Î±Î¹ Ï„Î± ÎšÎ•Î  ÎºÎ±Î¹ Ï€Î¿Î¹Î¿ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Ï‰ÏÎ¬ÏÎ¹ÏŒ Ï„Î¿Ï…Ï‚;</p>
    <p>2.Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚ Ï„Î¿Ï… ÎšÎ•Î  ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…;</p>
    <p>3.Î Î¿Ï ÎºÎ±Î»Ï Î³Î¹Î± Î²Î»Î¬Î²ÎµÏ‚ Î·Î»ÎµÎºÏ„ÏÎ¿Ï†Ï‰Ï„Î¹ÏƒÎ¼Î¿Ï;</p>
    <p>4.Î ÏÏ‚ ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Ï Î¼Îµ Ï„Î· Î”Î•Î¥Î‘ ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…;</p>
  </p>
</div>
      </article>

      <article class="card" role="listitem" aria-label="Plateia.live">
        <div class="card-header">
        <div class="icon" aria-hidden="true">ğŸ“¡</div>
        <h3 class="scenario-title" style="cursor:pointer;">5<sup>Î¿</sup> Î£ÎµÎ½Î¬ÏÎ¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h3>
      </div>
        <p style="text-align: center;">Î£ÏÎ½Î¸ÎµÏ„Î¿ ÎµÏÏÏ„Î·Î¼Î± & Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î¿ÏÎ¯Ï‰Î½</p>
        <div class="scenario-content" style="margin-top:12px;">
  <p><strong>Î•Î½Î´ÎµÎ¹ÎºÏ„Î¹ÎºÎ­Ï‚ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Ï€Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³ÎµÎ¯ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚:</strong></p>
  <p>ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î¸Î­ÏƒÎµÎ¹ Î¼Î¯Î± Î±Ï€ÏŒ Ï„Î¹Ï‚ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚:</p>
    <p>1.Î˜Î­Î»Ï‰ Î½Î± ÎµÎºÎ´ÏÏƒÏ‰ Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ Î¿Î¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÎ®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ ÎºÎ±Î¹ Î¼ÎµÏ„Î¬ Î½Î± ÎºÎ¬Î½Ï‰ Î¼ÎµÏ„Î±Î´Î·Î¼ÏŒÏ„ÎµÏ…ÏƒÎ·. Î‘Ï€ÏŒ Ï€Î¿Ï Î¾ÎµÎºÎ¹Î½Î¬Ï‰;</p>
    <p>2.ÎœÏ€Î¿ÏÏ Î½Î± ÎºÎ¬Î½Ï‰ Î·Î»ÎµÎºÏ„ÏÎ¿Î½Î¹ÎºÎ¬ Î±Î»Î»Î±Î³Î® ÎµÎºÎ»Î¿Î³Î¹ÎºÎ¿Ï Î´Î¹Î±Î¼ÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚ ÎºÎ±Î¹ Î½Î± ÎºÎ»ÎµÎ¯ÏƒÏ‰ ÏÎ±Î½Ï„ÎµÎ²Î¿Ï;</p>
 
</div>
      </article>

      <article class="card" role="listitem" aria-label="Î‘Î¹Ï„Î®Î¼Î±Ï„Î± Î Î¿Î»Î¹Ï„ÏÎ½">
        <div class="card-header">
        <div class="icon" aria-hidden="true">âœ…</div>
        <h3 class="scenario-title" style="cursor:pointer;">6<sup>Î¿</sup> Î£ÎµÎ½Î¬ÏÎ¹Î¿ Î§ÏÎ®ÏƒÏ„Î·</h3>
      </div>
        <p style="text-align: center;">Î¤Î¿Ï…ÏÎ¹ÏƒÏ„Î¹ÎºÎ® & Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ® Ï€Î»Î·ÏÎ¿Ï†ÏŒÏÎ·ÏƒÎ· Î¼Îµ ÎµÎ»ÎµÏÎ¸ÎµÏÎ· Î´Î¹Î±Ï„ÏÏ€Ï‰ÏƒÎ·</p>
        <div class="scenario-content" style="margin-top:12px;">
  <p><strong>Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Ï…Ï€Î¿Î²Î¬Î»Î»ÎµÎ¹ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ (Î¼Îµ Ï„Î· ÏƒÎµÎ¹ÏÎ¬):</strong></p>
  
    <p>1.Î¤Î¹ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î¼Ï€Î¿ÏÎµÎ¯Ï‚ Î½Î± Î¼Î¿Ï… Î´ÏÏƒÎµÎ¹Ï‚;</p>
    <p>2.Î‘Î½ Î­ÏÎ¸Ï‰ ÏƒÏ„Î·Î½ Ï€ÏŒÎ»Î· ÏƒÎ±Ï‚, Ï€Î¿Î¹Î± Î¼Î­ÏÎ· Î¼Ï€Î¿ÏÏ Î½Î± ÎµÏ€Î¹ÏƒÎºÎµÏ†Ï„Ï;</p>
    <p>3.Î˜Î­Î»Ï‰ Î½Î± Î¼Î¿Ï… Ï€ÎµÎ¹Ï‚ 3 Î¼Î­ÏÎ· Ï€Î¿Ï… Î¼Ï€Î¿ÏÏ Î½Î± ÎµÏ€Î¹ÏƒÎºÎµÏ†Ï„Ï.</p>
    <p>4.ÎœÏ€Î¿ÏÎµÎ¯Ï‚ Î±ÎºÏŒÎ¼Î· Î½Î± Î¼Î¿Ï… Ï€ÎµÎ¹Ï‚ Ï€ÏŒÏ„Îµ ÎºÎ±Î¹ Ï€ÏŒÏƒÎµÏ‚ Ï†Î¿ÏÎ­Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„ÏÎ¬Ï†Î·ÎºÎµ Î· Ï€ÏŒÎ»Î· Î±Ï€ÏŒ Ï†Ï…ÏƒÎ¹ÎºÎ¬ Ï†Î±Î¹Î½ÏŒÎ¼ÎµÎ½Î±;</p>
  
</div>

      </article>


      <article class="card questionnaire" role="listitem" aria-label="Î•ÏÏ‰Ï„Î·Î¼Î±Ï„Î¿Î»ÏŒÎ³Î¹Î¿">
      <a href="/questionnaire" class="card-link">
       <div class="card-header">
        <div class="icon" aria-hidden="true">ğŸ”§</div>
        <h3>Î•ÏÏ‰Ï„Î·Î¼Î±Ï„Î¿Î»ÏŒÎ³Î¹Î¿</h3>
      </div>
        <p style="text-align: center;">Î‘Ï†Î¿Ï Ï…Î»Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎ±Î½ Ï„Î± ÏƒÎµÎ½Î¬ÏÎ¹Î±.Î¤ÏÏÎ± Î¸Î± Î¸Î­Î»Î±Î¼Îµ Î½Î± Ï€ÏÎ±Î³Î¼Î±Ï„Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î¿ Î•ÏÏ‰Ï„Î·Î¼Î±Ï„Î¿Î»ÏŒÎ³Î¹Î¿.</p>
      </a>
      </article>
    </div>
  </main>

  <footer><div class="ft">Â© Î”Î®Î¼Î¿Ï‚ ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½ â€“ Demo Î³Î¹Î± Î±ÎºÎ±Î´Î·Î¼Î±ÏŠÎºÎ® Ï‡ÏÎ®ÏƒÎ·. Chatbot: Â«Î•Ï†ÏÏÎ±Â».</div></footer>

  <div class="chat-helper" id="chatHelper" aria-hidden="true">Î Ï‰Ï‚ Î¼Ï€Î¿ÏÏ Î½Î± ÏƒÎ±Ï‚ Î²Î¿Î·Î¸Î®ÏƒÏ‰;</div>

  <button class="chat-launcher" id="launcher"
          aria-haspopup="dialog" aria-controls="chatPanel" aria-expanded="false" title="Î†Î½Î¿Î¹Î³Î¼Î± ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚"><img src="/static/Ephyra.png" alt="Î•Ï†ÏÏÎ± â€“ Î¨Î·Ï†Î¹Î±ÎºÎ® Î’Î¿Î·Î¸ÏŒÏ‚ Î”Î®Î¼Î¿Ï…" /></button>

  <section class="chat-panel" id="chatPanel" role="dialog" aria-label="Î£Ï…Î½Î¿Î¼Î¹Î»Î¯Î± Î¼Îµ Ï„Î·Î½ Î•Ï†ÏÏÎ±" aria-modal="true">
    <div class="chat-header">
      <div class="chat-header-title">Î•Ï†ÏÏÎ±<br>Î’Î¿Î·Î¸ÏŒÏ‚ Î”Î®Î¼Î¿Ï…</div>
      <div class="chat-header-buttons">
        <button id="accessibilityHeaderBtn" class="accessibility-header-btn" aria-label="Î•Ï€Î¹Î»Î¿Î³Î­Ï‚ Ï€ÏÎ¿ÏƒÎ²Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚" title="Î ÏÎ¿ÏƒÎ²Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±">â™¿</button>
        <button id="soundBtn" aria-label="Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ·/Î‘Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î®Ï‡Î¿Ï…" title="Î‰Ï‡Î¿Ï‚">ğŸ”‡</button>
        <button id="resetChat" aria-label="Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚" title="Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚">â†»</button>
        <button id="closeChat" aria-label="ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚" title="ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿">âœ•</button>
      </div>
    </div>
    <div class="chat-messages" id="messages" aria-live="polite"></div>
    <form class="chat-input" id="chatForm" autocomplete="off">
      <div class="chat-input-row">
        <input id="chatField" type="text" placeholder="Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î®ÏƒÏ„Îµ Ï„Î¿ Î¼Î®Î½Ï…Î¼Î¬ ÏƒÎ±Ï‚â€¦" required aria-label="Î ÎµÎ´Î¯Î¿ Î¼Î·Î½ÏÎ¼Î±Ï„Î¿Ï‚" />
        <button type="submit">Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®</button>
      </div>
<div class="quick-replies" id="quickReplies">
        
      </div>
    </form>
  </section>

  <!-- Accessibility Panel -->
  <div class="accessibility-panel" id="accessibilityPanel">
    <h3>Î ÏÎ¿ÏƒÎ²Î±ÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±</h3>
    
    <div class="accessibility-option">
      <label for="highContrastToggle">
        <span>ğŸ”²</span> Î¥ÏˆÎ·Î»Î® Î‘Î½Ï„Î¯Î¸ÎµÏƒÎ·
      </label>
      <div class="toggle-switch" id="highContrastSwitch">
        <input type="checkbox" id="highContrastToggle">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
    <div class="accessibility-option">
      <label for="largeTextToggle">
        <span>ğŸ”</span> ÎœÎµÎ³Î¬Î»Î¿ ÎšÎµÎ¯Î¼ÎµÎ½Î¿
      </label>
      <div class="toggle-switch" id="largeTextSwitch">
        <input type="checkbox" id="largeTextToggle">
        <div class="toggle-slider"></div>
      </div>
    </div>
    
  </div>

  <script>
      const API_URL = window.location.origin;
      // Accessibility Settings Object - Global
      let accessibilitySettings = {
        voiceInput: false,
        screenReader: false,
        highContrast: false,
        largeText: false
      };

      // Toggle Accessibility Panel - Global Function
      function toggleAccessibilityPanel() {
        const panel = document.getElementById('accessibilityPanel');
        if (panel) {
          panel.classList.toggle('open');
        }
      }
      
      // Initialize Accessibility Features when DOM is ready
      function initAccessibility() {
        // Voice Input Toggle
        const voiceInputToggle = document.getElementById('voiceInputToggle');
        const voiceInputSwitch = document.getElementById('voiceInputSwitch');
        if (voiceInputToggle) {
          // Remove old event listeners
          const newToggle = voiceInputToggle.cloneNode(true);
          voiceInputToggle.parentNode.replaceChild(newToggle, voiceInputToggle);
          
          newToggle.addEventListener('change', (e) => {
            accessibilitySettings.voiceInput = e.target.checked;
            if (voiceInputSwitch) voiceInputSwitch.classList.toggle('active', e.target.checked);
            console.log('Voice input:', e.target.checked);
          });
          
          // Also handle click on the switch div
          if (voiceInputSwitch) {
            voiceInputSwitch.addEventListener('click', () => {
              newToggle.checked = !newToggle.checked;
              newToggle.dispatchEvent(new Event('change'));
            });
          }
        }

        // Screen Reader Toggle - Connect with existing TTS
        const screenReaderToggle = document.getElementById('screenReaderToggle');
        const screenReaderSwitch = document.getElementById('screenReaderSwitch');
        if (screenReaderToggle) {
          // Remove old event listeners
          const newToggle = screenReaderToggle.cloneNode(true);
          screenReaderToggle.parentNode.replaceChild(newToggle, screenReaderToggle);
          
          newToggle.addEventListener('change', (e) => {
            accessibilitySettings.screenReader = e.target.checked;
            if (screenReaderSwitch) screenReaderSwitch.classList.toggle('active', e.target.checked);
            // Enable/disable the existing TTS system
            if (typeof soundEnabled !== 'undefined') {
              soundEnabled = e.target.checked;
              const soundBtn = document.getElementById('soundBtn');
              if (soundBtn) {
                soundBtn.innerHTML = e.target.checked ? 'ğŸ”Š' : 'ğŸ”‡';
              }
            }
            console.log('Screen reader:', e.target.checked);
          });
          
          // Also handle click on the switch div
          if (screenReaderSwitch) {
            screenReaderSwitch.addEventListener('click', () => {
              newToggle.checked = !newToggle.checked;
              newToggle.dispatchEvent(new Event('change'));
            });
          }
        }

        // High Contrast Toggle
        const highContrastToggle = document.getElementById('highContrastToggle');
        const highContrastSwitch = document.getElementById('highContrastSwitch');
        if (highContrastToggle) {
          // Remove old event listeners
          const newToggle = highContrastToggle.cloneNode(true);
          highContrastToggle.parentNode.replaceChild(newToggle, highContrastToggle);
          
          newToggle.addEventListener('change', (e) => {
            accessibilitySettings.highContrast = e.target.checked;
            if (highContrastSwitch) highContrastSwitch.classList.toggle('active', e.target.checked);
            document.body.classList.toggle('high-contrast', e.target.checked);
            console.log('High contrast:', e.target.checked);
          });
          
          // Also handle click on the switch div
          if (highContrastSwitch) {
            highContrastSwitch.addEventListener('click', () => {
              newToggle.checked = !newToggle.checked;
              newToggle.dispatchEvent(new Event('change'));
            });
          }
        }

        // Large Text Toggle
        const largeTextToggle = document.getElementById('largeTextToggle');
        const largeTextSwitch = document.getElementById('largeTextSwitch');
        if (largeTextToggle) {
          // Remove old event listeners
          const newToggle = largeTextToggle.cloneNode(true);
          largeTextToggle.parentNode.replaceChild(newToggle, largeTextToggle);
          
          newToggle.addEventListener('change', (e) => {
            accessibilitySettings.largeText = e.target.checked;
            if (largeTextSwitch) largeTextSwitch.classList.toggle('active', e.target.checked);
            document.body.classList.toggle('large-text', e.target.checked);
            console.log('Large text:', e.target.checked);
          });
          
          // Also handle click on the switch div
          if (largeTextSwitch) {
            largeTextSwitch.addEventListener('click', () => {
              newToggle.checked = !newToggle.checked;
              newToggle.dispatchEvent(new Event('change'));
            });
          }
        }
        
        // Close panel when clicking outside
        document.addEventListener('click', (e) => {
          const panel = document.getElementById('accessibilityPanel');
          const accessBtn = document.getElementById('accessibilityBtn');
          
          if (panel && !panel.contains(e.target) && 
              (!accessBtn || !accessBtn.contains(e.target))) {
            panel.classList.remove('open');
          }
        });
      }
    const launcher = document.getElementById('launcher');
    const panel = document.getElementById('chatPanel');
    const accessibilityHeaderBtn = document.getElementById('accessibilityHeaderBtn');
    const closeBtn = document.getElementById('closeChat');
    const resetBtn = document.getElementById('resetChat');
    const soundBtn = document.getElementById('soundBtn');
    const form = document.getElementById('chatForm');
    const input = document.getElementById('chatField');
    const messages = document.getElementById('messages');
    const helper = document.getElementById('chatHelper');
    const quickRepliesContainer = document.getElementById('quickReplies');

    // Accessibility button handler
    accessibilityHeaderBtn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      toggleAccessibilityPanel();
    });

    // ğŸ’¾ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚ Î³Î¹Î± session memory
    let conversationHistory = [];

    let sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    // ğŸ”‡ ÎšÎ±Î¼Î¯Î± ÏÎ¿Î® Î¿Î½ÏŒÎ¼Î±Ï„Î¿Ï‚/Ï€ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏÎ½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
    let soundEnabled = localStorage.getItem('ephyra_sound') !== 'false';  // Default to true
    let isTTSEnabled = soundEnabled;  // Alias for compatibility
    let currentAudio = null;
    let introShown = false;
    let ttsQueue = [];
    let ttsPlaying = false;
    
    function linkify(text) {
      if (!text) return "";
      // Pattern Î³Î¹Î± ÎµÎ½Ï„Î¿Ï€Î¹ÏƒÎ¼ÏŒ URL Ï€Î¿Ï… Î¾ÎµÎºÎ¹Î½Î¿ÏÎ½ Î¼Îµ http/https
      const urlPattern = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
      
      return text.replace(urlPattern, function(url) {
        return `<a href="${url}" target="_blank" style="color: inherit; text-decoration: underline; font-weight: bold;">${url}</a>`;
      });
    }


    async function playResponseAudio(text) {
    if (!soundEnabled) return; // Î‘Î½ Î¿ Î®Ï‡Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ ÎºÎ»ÎµÎ¹ÏƒÏ„ÏŒÏ‚ (ğŸ”‡), ÏƒÏ„Î±Î¼Î¬Ï„Î±
    
    try {
        const cleanText = extractTextFromHTML(text); // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î±Ï€ÏŒ HTML tags
        const audioUrl = `${API_URL}/tts_play?text=${encodeURIComponent(cleanText)}`;
        
        if (currentAudio) currentAudio.pause(); // Î£Ï„Î±Î¼Î¬Ï„Î± Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Î®Ï‡Î¿
        
        currentAudio = new Audio(audioUrl);
        await currentAudio.play();
    } catch (err) {
        console.error("âŒ Î£Ï†Î¬Î»Î¼Î± Î®Ï‡Î¿Ï…:", err);
    }
}


    function clearTTS(){
      ttsQueue = [];
      if (currentAudio) { try { currentAudio.pause(); } catch(_) {} currentAudio = null; }
      ttsPlaying = false;
    }

    function updateSoundButton() {
      soundBtn.textContent = soundEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
      soundBtn.classList.toggle('active', soundEnabled);
      soundBtn.title = soundEnabled ? 'Î‘Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î®Ï‡Î¿Ï…' : 'Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î®Ï‡Î¿Ï…';
    }

    soundBtn.addEventListener('click', () => {
      soundEnabled = !soundEnabled;
      isTTSEnabled = soundEnabled;  // Keep in sync
      localStorage.setItem('ephyra_sound', soundEnabled ? 'true' : 'false');
      updateSoundButton();
      if (!soundEnabled) { clearTTS(); }
    });

// Extract text from HTML for TTS
function extractTextFromHTML(html) {
  const temp = document.createElement('div');
  temp.innerHTML = html;
  
  // Remove any buttons or interactive elements
  temp.querySelectorAll('button, .quick-reply-btn, .msg-feedback').forEach(el => el.remove());
  
  // Get clean text
  let text = temp.textContent || temp.innerText || '';
  
  // Clean up whitespace and special characters
  text = text.replace(/\s+/g, ' ')
         .replace(/[â€¢Â·â–ª]/g, ',')
         .replace(/[\n\r]+/g, '. ')
         .trim();
  
  return text;
}



    updateSoundButton();
const quickReplyButtons = {
  main: [
    { text: 'Î”ÎµÎ¯Î³Î¼Î± Î•ÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½', action: 'example_inlines' },
    { text: 'Î™ÏƒÏ„Î¿ÏÎ¯Î± Ï„Î·Ï‚ Î ÏŒÎ»Î·Ï‚', action: 'city_history' },
    { text: 'â“Î’Î¿Î®Î¸ÎµÎ¹Î±', action: 'help' }
  ],

  certificates: [
    { text: 'ğŸ”™ Î Î¯ÏƒÏ‰', action: 'main' },
    { text: 'Î“Î­Î½Î½Î·ÏƒÎ·Ï‚', query: 'Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ Î³Î­Î½Î½Î·ÏƒÎ·Ï‚;' },
    { text: 'Î•Î½Ï„Î¿Ï€Î¹ÏŒÏ„Î·Ï„Î±Ï‚', query: 'Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ ÎµÎ½Ï„Î¿Ï€Î¹ÏŒÏ„Î·Ï„Î±Ï‚;' },
    { text: 'ÎŸÎ¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÎ®Ï‚ ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚', query: 'Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Ï€Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ Î¿Î¹ÎºÎ¿Î³ÎµÎ½ÎµÎ¹Î±ÎºÎ®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚;' }
  ],

  civil_acts: [
    { text: 'ğŸ”™ Î Î¯ÏƒÏ‰', action: 'main' },
    { text: 'Î›Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ® Î ÏÎ¬Î¾Î· Î“Î­Î½Î½Î·ÏƒÎ·Ï‚', query: 'Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Î»Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ® Ï€ÏÎ¬Î¾Î· Î³Î­Î½Î½Î·ÏƒÎ·Ï‚;' },
    { text: 'Î›Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ® Î ÏÎ¬Î¾Î· Î˜Î±Î½Î¬Ï„Î¿Ï…', query: 'Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Î»Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ® Ï€ÏÎ¬Î¾Î· Î¸Î±Î½Î¬Ï„Î¿Ï…;' }
  ],

  show_examples: [
    { text: 'ğŸ”™ Î Î¯ÏƒÏ‰', action: 'main' },
    { text: 'Î Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÎ¬ Î“Î­Î½Î½Î·ÏƒÎ·Ï‚', action: 'certificates' },
    { text: 'Î›Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ­Ï‚ Î ÏÎ¬Î¾ÎµÎ¹Ï‚', action: 'civil_acts' },
    { text: 'Î ÏÏ‚ Î¼Ï€Î¿ÏÏ Î½Î± ÎºÎ¬Î½Ï‰ Î¼ÎµÏ„Î±Î´Î·Î¼ÏŒÏ„ÎµÏ…ÏƒÎ·', query: 'Î ÏÏ‚ Î¼Ï€Î¿ÏÏ Î½Î± ÎºÎ¬Î½Ï‰ Î¼ÎµÏ„Î±Î´Î·Î¼ÏŒÏ„ÎµÏ…ÏƒÎ· ÏƒÏ„Î¿Î½ Î”Î®Î¼Î¿ ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½;' },
    { text: 'Î§ÏÎ®ÏƒÎ¹Î¼Î± Î¤Î·Î»Î­Ï†Ï‰Î½Î±', query: 'Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Ï„Î± Ï‡ÏÎ®ÏƒÎ¹Î¼Î± Ï„Î·Î»Î­Ï†Ï‰Î½Î± Ï„Î¿Ï… Î”Î®Î¼Î¿Ï… ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½;' }
  ],
      
      
      city_history: [
        { text: 'ğŸ”™ Î Î¯ÏƒÏ‰', action: 'main' },
        { text: 'Î‘ÏÏ‡Î±Î¯Î± ÎšÏŒÏÎ¹Î½Î¸Î¿Ï‚', query: 'ÎœÎ¬Î¸Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± Î³Î¹Î± Ï„Î·Î½ Î±ÏÏ‡Î±Î¯Î± ÎšÏŒÏÎ¹Î½Î¸Î¿' },
        { text: 'Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ ÎœÎ½Î·Î¼ÎµÎ¯Î±', query: 'Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Ï„Î± ÎºÏ…ÏÎ¯Ï‰Ï‚ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î¼Î½Î·Î¼ÎµÎ¯Î± Ï„Î·Ï‚ ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…;' },
        { text: 'Î Î¿Î»Î¹Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±', query: 'Î Î¿Î¹Î¿ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Ï€Î¿Î»Î¹Ï„Î¹ÏƒÏ„Î¹ÎºÏŒ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½ Ï„Î·Ï‚ Ï€ÏŒÎ»Î·Ï‚;' }
      ]
    };


/* ========= In-chat language switch & i18n ========= */
let currentLang = sessionStorage.getItem("ephyra_lang") || "el";
const I18N = {
  el: {
    placeholder: "Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î®ÏƒÏ„Îµ Ï„Î¿ Î¼Î®Î½Ï…Î¼Î¬ ÏƒÎ±Ï‚â€¦",
    send: "Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î®",
    examples: "Î”ÎµÎ¯Î³Î¼Î± Î•ÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½",
    city_history: "Î™ÏƒÏ„Î¿ÏÎ¯Î± Ï„Î·Ï‚ Î ÏŒÎ»Î·Ï‚",
    help: "â“Î’Î¿Î®Î¸ÎµÎ¹Î±",
    greeting: "Î“ÎµÎ¹Î± ÏƒÎ±Ï‚! Î•Î¯Î¼Î±Î¹ Î· <strong>Î•Ï†ÏÏÎ±</strong>, Î¿ ÏˆÎ·Ï†Î¹Î±ÎºÏŒÏ‚ Î²Î¿Î·Î¸ÏŒÏ‚ Ï„Î¿Ï… Î”Î®Î¼Î¿Ï…. Î ÏÏ‚ Î¼Ï€Î¿ÏÏ Î½Î± Î²Î¿Î·Î¸Î®ÏƒÏ‰; ğŸ˜Š",
    disclaimer: "âš ï¸ <strong>Î£Î·Î¼Î±Î½Ï„Î¹ÎºÏŒ:</strong> Î Î±ÏÎ±ÎºÎ±Î»Ï Î¼Î·Î½ Î´Î¯Î½ÎµÏ„Îµ Ï€ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ¬ ÏƒÎ±Ï‚ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± (Î‘Î¦Îœ, Î±ÏÎ¹Î¸Î¼ÏŒ Ï„Î±Ï…Ï„ÏŒÏ„Î·Ï„Î±Ï‚, Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· ÎºÎ±Ï„Î¿Î¹ÎºÎ¯Î±Ï‚ ÎºÎ»Ï€).",
    typing: "Î— Î•Ï†ÏÏÎ± Ï€Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³ÎµÎ¯"
  },
  en: {
    placeholder: "Type your messageâ€¦",
    send: "Send",
    examples: "Examples",
    city_history: "City History",
    help: "â“Help",
    greeting: "Hello! Iâ€™m <strong>Ephyra</strong>, the municipalityâ€™s digital assistant. How can I help? ğŸ˜Š",
    disclaimer: "âš ï¸ <strong>Important:</strong> Please do not share personal data (tax ID, ID number, home address, etc.).",
    typing: "Ephyra is typing"
  }
};

function applyChatLang(lang){
  currentLang = lang;
  sessionStorage.setItem("ephyra_lang", lang);
  const t = I18N[lang] || I18N.el;
  const inputEl = document.getElementById('chatField');
  if (inputEl) inputEl.placeholder = t.placeholder;
  const sendBtn = document.querySelector('#chatForm button[type=\"submit\"]');
  if (sendBtn) sendBtn.textContent = t.send;
  const toggleBtn = document.getElementById('langToggleBtn');
  if (toggleBtn) {
    toggleBtn.classList.toggle('el-active', lang === 'el');
    toggleBtn.classList.toggle('en-active', lang === 'en');
    toggleBtn.innerHTML = lang === 'el' ? 'ğŸ‡¬ğŸ‡§' : 'ğŸ‡¬ğŸ‡·';
    toggleBtn.title = lang === 'el' ? 'Î‘Î»Î»Î±Î³Î® ÏƒÎµ Î‘Î³Î³Î»Î¹ÎºÎ¬' : 'Î‘Î»Î»Î±Î³Î® ÏƒÎµ Î•Î»Î»Î·Î½Î¹ÎºÎ¬';
  }
  window.EPHYRA_LANG = lang;
}

document.addEventListener('DOMContentLoaded', ()=>{
  applyChatLang(currentLang);
});

const _origShowQuickReplies = showQuickReplies;
showQuickReplies = function(category='main'){
  const t = I18N[currentLang] || I18N.el;
  if (category === 'main') {
    quickReplyButtons.main = [
      { text: t.examples, action: 'example_inlines' },
      { text: t.city_history, action: 'city_history' },
      { text: t.help, action: 'help' }
    ];
  }
  _origShowQuickReplies(category);
};


    function showQuickReplies(category = 'main') {
      quickRepliesContainer.innerHTML = '';
      
      // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Ï Ï„Î± quick reply buttons Ï€ÏÏÏ„Î± (Ï‡Ï‰ÏÎ¯Ï‚ Ï„Î¿ language button)
      (quickReplyButtons[category] || quickReplyButtons.main).forEach(btn => {
        const b = document.createElement('button');
        b.type = 'button';
        b.className = 'quick-reply-btn';
        b.textContent = btn.text;
        // Î‘Î½ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ "Î Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÎ¬", Î¬Î»Î»Î±Î¾Îµ Ï„Î¿ label
       if ((btn.text || '').trim() === 'Î Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÎ¬') {
       b.textContent = 'Î”ÎµÎ¯Î³Î¼Î± Î•ÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½';
}
        b.setAttribute('style','background:#fff; border:2px solid #5b86f5; color:#1e2a3b;border-radius:14px;padding:10px 14px;font-weight:600;box-shadow:0 1px 1px rgba(0,0,0,0.05); max-width:150px; overflow:hidden; text-overflow:ellipsis;');

        b.addEventListener('click', (e) => {
           e.preventDefault();
           e.stopPropagation();
  // Î‘Î½ Ï€Î±Ï„Î·Î¸ÎµÎ¯ Ï„Î¿ "Î Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± Î•ÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½"
  if (btn.action === 'example_inlines') {
  let examples, title;
  
  if (currentLang === 'el') {
    examples = [
      "Î Î¿Î¹Î¿ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Ï„Î·Î»Î­Ï†Ï‰Î½Î¿ Ï„Î¿Ï… Î´Î·Î¼Î±ÏÏ‡ÎµÎ¯Î¿Ï…;",
      "Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Î›Î·Î¾Î¹Î±ÏÏ‡Î¹ÎºÎ® Î ÏÎ¬Î¾Î· Î“Î­Î½Î½Î·ÏƒÎ·Ï‚;",
      "Î ÏÏ‚ Î³Î¯Î½ÎµÏ„Î±Î¹ Î· Î¼ÎµÏ„Î±Î´Î·Î¼ÏŒÏ„ÎµÏ…ÏƒÎ·;",
      "Î ÏÏ‚ ÎµÎºÎ´Î¯Î´Ï‰ Î Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Ï„Î¹ÎºÏŒ Î“Î­Î½Î½Î·ÏƒÎ·Ï‚;",
      "Î ÏÏ‚ ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Ï Î¼Îµ Ï„Î· Î”Î•Î¥Î‘ ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…;",
      "Î Î¿Ï Î³Î¯Î½ÎµÏ„Î±Î¹ Î· Î´Î®Î»Ï‰ÏƒÎ· Ï„Î¿Ï… Î³Î¬Î¼Î¿Ï…;",
      "Î¤Î¹ ÏÏÎµÏ‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ Ï„Î¿ ÎšÎ•Î ;"
    ];
    title = "Î Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± ÎµÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½:";
  } else {
    examples = [
      "What is the mayor's office phone number?",
      "What is the procedure for changing municipality?",
      "What is the procedure for issuing a birth certificate?",
      "What is the Î”Î•Î¥Î‘ phone number?",
      "What are the operating hours of the KEP?"
    ];
    title = "Example questions:";
  }

 const examplesList = examples.map(q => `
  <button type="button"
    class="quick-reply-btn"
    style="display:block;width:100%;text-align:left;margin:6px 0;justify-content:flex-start;"
    data-example="1">
   ${q}
  </button>
`).join('');


  addBot(`
    <div style="background:#e6f0ff;border:1px solid #c9ddff;border-radius:10px;padding:12px;color:#123d7a;">
      <div style="font-weight:700;margin-bottom:8px;">${title}</div>
      ${examplesList}
      <div style="margin-top:8px;font-size:12px;color:#466aa3;">
        ${currentLang === 'el' ? 'ÎšÎ¬Î½Ï„Îµ ÎºÎ»Î¹Îº ÏƒÎµ Î¼Î¹Î± ÎµÏÏÏ„Î·ÏƒÎ· Î³Î¹Î± Î½Î± Ï„Î· Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÏ„Îµ!' : 'Click on a question to try it!'}
      </div>
    </div>
  `, true);
  return; // Î´ÎµÎ½ Î±Î½Î¿Î¯Î³Î¿Ï…Î¼Îµ Î¬Î»Î»Î¿ Î¼ÎµÎ½Î¿Ï
}


// Î‘Î½ Ï€Î±Ï„Î·Î¸ÎµÎ¯ Ï„Î¿ "Î™ÏƒÏ„Î¿ÏÎ¯Î± Ï„Î·Ï‚ Î ÏŒÎ»Î·Ï‚" â†’ ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· panel Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ chat
if (btn.action === 'city_history' || btn.text === 'Î™ÏƒÏ„Î¿ÏÎ¯Î± Ï„Î·Ï‚ Î ÏŒÎ»Î·Ï‚' || btn.text === 'City History') {
  let items, title, subtitle;
  
  if (currentLang === 'el') {
    items = [
      { label: 'Î™ÏƒÏ„Î¿ÏÎ¯Î± Ï„Î·Ï‚ Ï€ÏŒÎ»Î·Ï‚', q: 'Î™ÏƒÏ„Î¿ÏÎ¯Î± Ï„Î·Ï‚ Ï€ÏŒÎ»Î·Ï‚ ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…' },
      { label: 'Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î±Î¾Î¹Î¿Î¸Î­Î±Ï„Î±', q: 'Î™ÏƒÏ„Î¿ÏÎ¹ÎºÎ¬ Î±Î¾Î¹Î¿Î¸Î­Î±Ï„Î± ÎšÎ¿ÏÎ¯Î½Î¸Î¿Ï…' }
    ];
    title = "ğŸ›ï¸ Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¸Î­Î¼Î±:";
    subtitle = "ÎšÎ¬Î½Ï„Îµ ÎºÎ»Î¹Îº ÏƒÎµ Î¼Î¯Î± ÎµÏ€Î¹Î»Î¿Î³Î® Î³Î¹Î± Î½Î± Ï„Î· Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÏ„Îµ.";
  } else {
    items = [
      { label: 'City history', q: 'History of the city of Corinth' },
      { label: 'Historical landmarks', q: 'Historical landmarks of Corinth' }
    ];
    title = "ğŸ›ï¸ Select a topic:";
    subtitle = "Click on an option to try it.";
  }

  const list = items.map(it => `
    <button type="button"
      class="quick-reply-btn"
      style="display:block;width:100%;text-align:left;margin:6px 0;justify-content:flex-start;"
      data-example="1">
       ${it.q}
    </button>
  `).join('');

  addBot(`
    <div style="background:#e6f0ff;border:1px solid #c9ddff;border-radius:10px;padding:12px;color:#123d7a;">
      <div style="font-weight:700;margin-bottom:8px;">${title}</div>
      ${list}
      <div style="margin-top:8px;font-size:12px;color:#466aa3;">
        ${subtitle}
      </div>
    </div>
  `, true);
  return; // Î´ÎµÎ½ Î±Î½Î¿Î¯Î³Î¿Ï…Î¼Îµ Î¬Î»Î»Î¿ Î¼ÎµÎ½Î¿Ï
}

// Î‘Î½ Ï€Î±Ï„Î·Î¸ÎµÎ¯ Ï„Î¿ "Î’Î¿Î®Î¸ÎµÎ¹Î±" â†’ ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Î¿Î´Î·Î³Î¹ÏÎ½ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ chat
if (btn.action === 'help' || btn.text === 'Î’Î¿Î®Î¸ÎµÎ¹Î±' || btn.text === 'Help') {
  let title, listItems, tip;
  
  if (currentLang === 'el') {
    title = "â“ ÎŸÎ´Î·Î³Î¯ÎµÏ‚ Ï‡ÏÎ®ÏƒÎ·Ï‚:";
    listItems = [
      "Î¡Ï‰Ï„Î®ÏƒÏ„Îµ Î¿Ï„Î¹Î´Î®Ï€Î¿Ï„Îµ Î³Î¹Î± Ï„Î¿Î½ Î”Î®Î¼Î¿ ÎšÎ¿ÏÎ¹Î½Î¸Î¯Ï‰Î½",
      "Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï†Ï…ÏƒÎ¹ÎºÎ® Î³Î»ÏÏƒÏƒÎ± Î¼Î¹Î»Î®ÏƒÏ„Îµ ÏŒÏ€Ï‰Ï‚ ÏƒÎµ Î­Î½Î±Î½ Ï…Ï€Î¬Î»Î»Î·Î»Î¿",
      "Î”ÏÏƒÏ„Îµ feedback Î¼Îµ ğŸ‘ / ğŸ‘ Î³Î¹Î± Î²ÎµÎ»Ï„Î¯Ï‰ÏƒÎ· Î±Ï€Î±Î½Ï„Î®ÏƒÎµÏ‰Î½",
      "Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î¿Î½ Î®Ï‡Î¿ <b> (ğŸ”Š) </b>  Î³Î¹Î± Ï†Ï‰Î½Î·Ï„Î¹ÎºÎ­Ï‚ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÎ¹Ï‚",
      "Î— ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÎµÏ„Î±Î¹ Ï„Î¿Ï€Î¹ÎºÎ¬ ÏƒÏ„Î¿Î½ browser ÏƒÎ±Ï‚"
    ];
    tip = "ğŸ’¡ <b>Î£Ï…Î¼Î²Î¿Ï…Î»Î®:</b> ÎŒÏƒÎ¿ Ï€Î¹Î¿ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î· Î· ÎµÏÏÏ„Î·ÏƒÎ·, Ï„ÏŒÏƒÎ¿ ÎºÎ±Î»ÏÏ„ÎµÏÎ· Î· Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·!";
  } else {
    title = "â“ Usage Instructions:";
    listItems = [
      "Ask anything about the Municipality of Corinth",
      "Use natural language, speak as you would to an employee",
      "Give feedback with ğŸ‘ / ğŸ‘ to improve answers",
      "Enable audio <b> (ğŸ”Š) </b> for voice responses",
      "Your conversation is stored locally in your browser"
    ];
    tip = "ğŸ’¡ <b>Tip:</b> The more specific your question, the better the answer!";
  }
  
  const listHTML = listItems.map(item => `<li>${item}</li>`).join('');

  addBot(`
    <div style="background:#c0d7fc;border:1px solid #b8d0ff;border-radius:12px;padding:12px 14px;color:#123d7a;">
      <div style="font-weight:700;margin-bottom:8px;font-size:13px;">${title}</div>
      <ul style="margin:0;padding-left:16px;line-height:1.6; font-size:12px;">
        ${listHTML}
      </ul>
      <div style="margin-top:10px;background:#fff8e6;border-radius:10px;padding:8px 10px;color:#856404;font-size:12px;">
        ${tip}
      </div>
    </div>
  `, true);
  // ÎºÎ±Î¸Î¬ÏÎ¹ÏƒÎµ Ï„Î¿Î½ ÎµÎ¾Ï‰Ï„ÎµÏÎ¹ÎºÏŒ bubble ÎœÎŸÎÎŸ Î³Î¹Î± Î±Ï…Ï„ÏŒ Ï„Î¿ Î¼Î®Î½Ï…Î¼Î±
const lastBot = document.querySelector('.msg.bot:last-of-type');
if (lastBot){
  lastBot.style.background = 'transparent';
  lastBot.style.border = 'none';
  lastBot.style.boxShadow = 'none';
  lastBot.style.padding = '0';
}

  return;
}




  // ÎšÎ±Î½Î¿Î½Î¹ÎºÎ® Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î³Î¹Î± Ï„Î± Ï…Ï€ÏŒÎ»Î¿Î¹Ï€Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬
  if (btn.action) return showQuickReplies(btn.action);
  if (btn.query) {
    input.value = btn.query;
    form.dispatchEvent(new Event('submit'));
  }
});

        quickRepliesContainer.appendChild(b);
      });
      
      // Î ÏÎ¿ÏƒÎ¸Î­Ï„Ï‰ Ï„Î¿ language toggle button ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚ (Î”Î•ÎÎ™Î‘)
      const langBtn = document.createElement('button');
      langBtn.type = 'button';
      langBtn.id = 'langToggleBtn';
      langBtn.className = 'lang-toggle-btn el-active';
      langBtn.setAttribute('aria-label', 'Î‘Î»Î»Î±Î³Î® Î³Î»ÏÏƒÏƒÎ±Ï‚');
      langBtn.setAttribute('title', 'ÎšÎ¬Î½Ï„Îµ ÎºÎ»Î¹Îº Î³Î¹Î± Î±Î»Î»Î±Î³Î® Î³Î»ÏÏƒÏƒÎ±Ï‚');
      langBtn.innerHTML = currentLang === 'el' ? 'ğŸ‡¬ğŸ‡§' : 'ğŸ‡¬ğŸ‡·';
      langBtn.addEventListener('click', (e)=>{
        e.preventDefault();
        e.stopPropagation();
        const newLang = currentLang === 'el' ? 'en' : 'el';
        applyChatLang(newLang);
        showQuickReplies('main');
      });
      quickRepliesContainer.appendChild(langBtn);
    }

    let wiggleTimer = null;
    function cueWiggle(){ if (panel.style.display !== 'flex') launcher.classList.add('wiggle'); }
    launcher.addEventListener('animationend', () => launcher.classList.remove('wiggle'));
    setTimeout(cueWiggle, 1200); 
    wiggleTimer = setInterval(cueWiggle, 7000);
    setTimeout(()=>{ if(helper) helper.style.display='block'; }, 300);

 function openChat(){
      panel.style.display='flex';
      setTimeout(() => panel.classList.add('open'), 10);
      launcher.setAttribute('aria-expanded','true');
      if(helper) helper.style.display='none';
      input.focus();
      if (wiggleTimer) { clearInterval(wiggleTimer); wiggleTimer = null; }
      launcher.classList.remove('wiggle');
      showQuickReplies('main');

      if (!introShown) {
        addDisclaimer();
        const welcomeText = (I18N[currentLang]||I18N.el).greeting;
        
        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎºÎ±Î¹ ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Î¿Ï… Î¼Î·Î½ÏÎ¼Î±Ï„Î¿Ï‚ ÏƒÏ„Î¿ UI
        const botMsg = document.createElement('div');
        botMsg.className = 'msg bot';
        botMsg.innerHTML = linkify(welcomeText)
        messages.appendChild(botMsg);
        messages.scrollTop = messages.scrollHeight;

        // âœ¨ Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—: Î•Î½Ï„Î¿Î»Î® Î³Î¹Î± Î½Î± Î±ÎºÎ¿Ï…ÏƒÏ„ÎµÎ¯ Î· Ï†Ï‰Î½Î® ÏƒÏ„Î¿ ÎºÎ±Î»Ï‰ÏƒÏŒÏÎ¹ÏƒÎ¼Î±
        if (typeof playResponseAudio === 'function') {
            playResponseAudio(welcomeText);
        }

        introShown = true;
      }
      
      // Initialize accessibility features after chat opens
      setTimeout(() => {
        initAccessibility();
      }, 100);
    }
    function closeChat(){
      panel.classList.remove('open');
      setTimeout(() => { panel.style.display='none'; }, 200);
      launcher.setAttribute('aria-expanded','false');
      launcher.focus();
      if(helper) helper.style.display='block';
      if (!wiggleTimer) wiggleTimer = setInterval(cueWiggle, 7000);
    }

    function toggleChat(){ (panel.style.display === 'flex') ? closeChat() : openChat(); }

    launcher.addEventListener('click', toggleChat);
    closeBtn.addEventListener('click', closeChat);

    function addDisclaimer(){
      const el = document.createElement('div'); el.className='msg disclaimer';
      el.innerHTML=(I18N[currentLang]||I18N.el).disclaimer;
      messages.appendChild(el); messages.scrollTop = messages.scrollHeight;
    }

    resetBtn.addEventListener('click', () => {
      messages.innerHTML='';
      conversationHistory = [];  // ÎšÎ±Î¸Î±ÏÎ¯Î¶Ï‰ Ï„Î¿ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ
      addDisclaimer();
      addBot((I18N[currentLang]||I18N.el).greeting, true);
      showQuickReplies('main');
      introShown = true;
      input.focus();
    });

    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && panel.style.display==='flex') closeChat(); });

    function showFeedbackTooltip(){
      // Î”Î¹Î±Î³ÏÎ¬Ï†Ï‰ Ï€Î±Î»Î¹ÏŒ tooltip Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹
      const oldTooltip = document.querySelector('.feedback-tooltip');
      if (oldTooltip) oldTooltip.remove();
      
      // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Ï Î½Î­Î¿ tooltip
      const tooltip = document.createElement('div');
      tooltip.className = 'feedback-tooltip';
      tooltip.innerHTML = 'ğŸ˜Š Î Î±Ï„Î®ÏƒÏ„Îµ Ï„Î¿ Î±Î½Î¬Î»Î¿Î³Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ Î±Î½ ÏƒÎ±Ï‚ Î¬ÏÎµÏƒÎµ Î® Î¿Ï‡Î¹ Î· Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·.';
      document.body.appendChild(tooltip);
      
      // Î•Î¾Î±Ï†Î¬Î½Î¹ÏƒÎ· Î¼ÎµÏ„Î¬ 10 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
      setTimeout(() => {
        if (tooltip && tooltip.parentNode) {
          tooltip.classList.add('fade-out');
          setTimeout(() => tooltip.remove(), 200);
        }
      }, 4000);
    }

    // ÎÎ•ÎŸÎ£ ÎšÎ©Î”Î™ÎšÎ‘Î£ - Î ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ user_question ÎºÎ±Î¹ sessionId
async function sendFeedback(botResponse, isPositive){
  try {
    // Î Î±Î¯ÏÎ½Î¿Ï…Î¼Îµ Ï„Î·Î½ Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÏÏÏ„Î·ÏƒÎ· Ï„Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î·
    const lastUserMessage = conversationHistory
      .slice()
      .reverse()
      .find(msg => msg.role === 'user');
    
    const userQuestion = lastUserMessage ? lastUserMessage.content : '';
    
    const r = await fetch(`${API_URL}/feedback`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify({
        bot_response: botResponse,
        user_question: userQuestion,        // âœ¨ Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—
        is_positive: isPositive,
        conversation_id: sessionId           // âœ¨ Î‘Î›Î›Î‘Î“Î— (Î±Ï€ÏŒ conversationHistory[0].timestamp)
      })
    });
        
        if (r.ok) {
          console.log('âœ… Feedback ÎºÎ±Ï„Î±Î³ÏÎ¬Ï†Î·ÎºÎµ:', isPositive ? 'Î˜ÎµÏ„Î¹ÎºÏŒ âœ“' : 'Î‘ÏÎ½Î·Ï„Î¹ÎºÏŒ âœ—');
        } else {
          console.warn('âš ï¸ Î”ÎµÎ½ Î®Ï„Î±Î½ Î´Ï…Î½Î±Ï„Î® Î· ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î® Ï„Î¿Ï… feedback');
        }
      } catch (err) {
        console.error('âŒ Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î® feedback:', err);
      }
    }

    function addUser(t){
      const el=document.createElement('div'); el.className='msg user'; el.innerText=t;
      messages.appendChild(el); messages.scrollTop=messages.scrollHeight;
    }

    function addBot(html, skipFeedback = false){
      const el=document.createElement('div'); el.className='msg bot'; el.innerHTML=html;
      messages.appendChild(el); 
      
      // ğŸ‘ Î ÏÎ¿ÏƒÎ¸Î­Ï„Ï‰ feedback buttons (ÎµÎºÏ„ÏŒÏ‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ greeting/disclaimer)
      if (!skipFeedback) {
        const feedbackDiv = document.createElement('div'); 
        feedbackDiv.className = 'msg-feedback';
        
        const thumbsUp = document.createElement('button');
        thumbsUp.className = 'feedback-btn';
        thumbsUp.innerHTML = 'ğŸ‘';
        thumbsUp.title = 'Î§ÏÎ®ÏƒÎ¹Î¼Î· Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·';
        thumbsUp.addEventListener('click', () => {
          thumbsUp.classList.add('active');
          thumbsDown.classList.remove('active');
          sendFeedback(html, true);
        });
        
        const thumbsDown = document.createElement('button');
        thumbsDown.className = 'feedback-btn';
        thumbsDown.innerHTML = 'ğŸ‘';
        thumbsDown.title = 'Î”ÎµÎ½ Î®Ï„Î±Î½ Ï‡ÏÎ®ÏƒÎ¹Î¼Î·';
        thumbsDown.addEventListener('click', () => {
          thumbsDown.classList.add('active');
          thumbsUp.classList.remove('active');
          sendFeedback(html, false);
        });
        
        const copyBtn = document.createElement('button');
        copyBtn.className = 'feedback-btn copy-btn';
        copyBtn.innerHTML = 'ğŸ“‹';
        copyBtn.title = 'Î‘Î½Ï„Î¹Î³ÏÎ±Ï†Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·Ï‚';
        copyBtn.addEventListener('click', () => {
          navigator.clipboard.writeText(html).then(() => {
            copyBtn.innerHTML = 'âœ…';
            setTimeout(() => {
              copyBtn.style.backgroundColor = '';
            }, 2000);
          }).catch(() => {
            copyBtn.innerHTML = 'âŒ';
            setTimeout(() => {
              copyBtn.innerHTML = 'ğŸ“‹';
            }, 2000);
          });
        });
        
        feedbackDiv.appendChild(thumbsUp);
        feedbackDiv.appendChild(thumbsDown);
        feedbackDiv.appendChild(copyBtn);
        el.appendChild(feedbackDiv);
        
        // ğŸ’¬ Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· tooltip Î³Î¹Î± Î½Î± ÎµÎ¾Î·Î³Î®ÏƒÏ‰ Ï„Î± feedback buttons
        showFeedbackTooltip();
      }
      
      messages.scrollTop=messages.scrollHeight;
    }

    function addError(text){
      const el=document.createElement('div'); el.className='msg error'; el.innerText=text;
      messages.appendChild(el); messages.scrollTop=messages.scrollHeight;
    }

    let typingEl=null;
    function typing(on){
      if(on){
        typingEl=document.createElement('div'); typingEl.className='msg bot typing'; typingEl.innerText=(I18N[currentLang]||I18N.el).typing;
        messages.appendChild(typingEl); messages.scrollTop=messages.scrollHeight;
      } else if(typingEl){ typingEl.remove(); typingEl=null; }
    }

    function isGreeting(text){
      const l=text.toLowerCase().trim();
      const gs=['Î³ÎµÎ¹Î±','ÎºÎ±Î»Î·Î¼Î­ÏÎ±','ÎºÎ±Î»Î·Î¼ÎµÏÎ±','ÎºÎ±Î»Î·ÏƒÏ€Î­ÏÎ±','ÎºÎ±Î»Î·ÏƒÏ€ÎµÏÎ±','Ï‡Î¬Î¹ÏÎµÏ„Îµ','Ï‡Î±Î¹ÏÎµÏ„Îµ','Î³ÎµÎ¹Î¬','Î³ÎµÎ¹Î± ÏƒÎ±Ï‚','Î³ÎµÎ¹Î± ÏƒÎ¿Ï…','ÎºÎ±Î»Î·Î¼Î­ÏÎ± ÏƒÎ±Ï‚','ÎºÎ±Î»Î·ÏƒÏ€Î­ÏÎ± ÏƒÎ±Ï‚'];
      return gs.some(g=>l===g||l.startsWith(g+' '));
    }

    function getGreetingResponse(userText){
      const l = userText.toLowerCase().trim();
      let greeting = 'Î“ÎµÎ¹Î± ÏƒÎ±Ï‚';
      
      // Î‘Î½Ï„Î¹ÏƒÏ„Î¿Î¹Ï‡Ï Ï„Î¿ Î¯Î´Î¹Î¿ Ï‡Î±Î¹ÏÎµÏ„Î¹ÏƒÎ¼ÏŒ Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚
      if (l.includes('ÎºÎ±Î»Î·Î¼Î­ÏÎ±') || l.includes('ÎºÎ±Î»Î·Î¼ÎµÏÎ±')) {
        greeting = 'ÎšÎ±Î»Î·Î¼Î­ÏÎ±';
      } else if (l.includes('ÎºÎ±Î»Î·ÏƒÏ€Î­ÏÎ±') || l.includes('ÎºÎ±Î»Î·ÏƒÏ€ÎµÏÎ±')) {
        greeting = 'ÎšÎ±Î»Î·ÏƒÏ€Î­ÏÎ±';
      } else if (l.includes('Ï‡Î±Î¯ÏÎµÏ„Îµ') || l.includes('Ï‡Î±Î¹ÏÎµÏ„Îµ')) {
        greeting = 'Î§Î±Î¯ÏÎµÏ„Îµ';
      } else if (l.startsWith('Î³ÎµÎ¹Î±')) {
        greeting = 'Î“ÎµÎ¹Î± ÏƒÎ¿Ï…';
      }
      
      return `${greeting}! Î ÏÏ‚ Î¼Ï€Î¿ÏÏ Î½Î± ÏƒÎ±Ï‚ Î²Î¿Î·Î¸Î®ÏƒÏ‰; ğŸ˜Š`;
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const text=input.value.trim(); if(!text) return;

      input.disabled=true; form.querySelector('button').disabled=true;
      addUser(text); input.value='';

      // Î ÏÎ¿ÏƒÎ¸Î­Ï„Ï‰ Ï„Î¿ Î¼Î®Î½Ï…Î¼Î± Ï„Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î· ÏƒÏ„Î¿ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ
      conversationHistory.push({ role: 'user', content: text });

      // Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ® Î³ÏÎ®Î³Î¿ÏÎ· Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· ÏƒÎµ Ï‡Î±Î¹ÏÎµÏ„Î¹ÏƒÎ¼ÏŒ
      if (isGreeting(text)) {
        typing(true); 
        setTimeout(()=>{ 
          typing(false);
          const greeting = getGreetingResponse(text);
          addBot(greeting, true);
          conversationHistory.push({ role: 'assistant', content: greeting });
          input.disabled=false; form.querySelector('button').disabled=false; input.focus(); 
        }, 350);
        return;
      }

      typing(true);
      try{
        const r=await fetch(`${API_URL}/ask`,{
          method:'POST', headers:{'Content-Type':'application/json'}, credentials:'include',
          body:JSON.stringify({ messages: conversationHistory, top_k:10, lang: currentLang })
        });
        if(!r.ok) throw new Error('HTTP '+r.status);
        const data=await r.json(); 
        typing(false);
        
        if(data.answer){ 
          // 1. ÎœÎµÏ„Î±Ï„ÏÎ¿Ï€Î® Ï„Î¿Ï… ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… ÏƒÎµ HTML Î¼Îµ ÎµÎ½ÎµÏÎ³Î¿ÏÏ‚ ÏƒÏ…Î½Î´Î­ÏƒÎ¼Î¿Ï…Ï‚
          const formattedAnswer = linkify(data.answer);
          // 2. Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ÏƒÏ„Î¿ Chat
          addBot(formattedAnswer, false);
          // 3. Î—Ï‡Î·Ï„Î¹ÎºÎ® Î±Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î®
          playResponseAudio(data.answer);

          // Î ÏÎ¿ÏƒÎ¸Î­Ï„Ï‰ Ï„Î·Î½ Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· Ï„Î¿Ï… bot ÏƒÏ„Î¿ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ
          conversationHistory.push({ role: 'assistant', content: data.answer });
          
          // Logging metrics
          if (data.quality && data.confidence !== undefined) {
            console.log(`âœ¨ Response Quality: ${data.quality.toUpperCase()}`);
            console.log(`ğŸ“Š Confidence: ${(data.confidence * 100).toFixed(1)}%`);
          }
        } else { 
          addError('Î›Ï…Ï€Î¬Î¼Î±Î¹, Î´ÎµÎ½ Î¼Ï€ÏŒÏÎµÏƒÎ± Î½Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÏ„Ï Ï„Î·Î½ ÎµÏÏÏ„Î·ÏƒÎ® ÏƒÎ±Ï‚.'); 
        }
      } catch(err){
        typing(false); 
        console.error(err); 
        addError('Î£Ï…Î³Î³Î½ÏÎ¼Î·, ÎºÎ¬Ï„Î¹ Ï€Î®Î³Îµ ÏƒÏ„ÏÎ±Î²Î¬. Î Î±ÏÎ±ÎºÎ±Î»Ï Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î¾Î±Î½Î¬.');
      } finally {
        input.disabled=false; form.querySelector('button').disabled=false; input.focus();
      }
    });

    async function checkBackendHealth(){
      try{ 
        const r=await fetch(`${API_URL}/health`); 
        const d=await r.json(); 
        console.log('âœ… Backend:', d); 
      } catch(e){ 
        console.warn('âš ï¸ Backend not reachable:', e); 
      }
    }
    
    checkBackendHealth();

    // ÎšÎ»Î¹Îº Ï€Î¬Î½Ï‰ ÏƒÎµ ÎºÎ¿Ï…Î¼Ï€Î¯ Ï€Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î¿Ï‚ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ chat â†’ ÏƒÏ„ÎµÎ¯Î»Îµ ÎµÏÏÏ„Î·ÏƒÎ·
messages.addEventListener('click', (e) => {
  const btn = e.target.closest('.quick-reply-btn');
  if (!btn || !btn.closest('.msg.bot')) return;

  e.preventDefault();
  e.stopPropagation();

  const q = btn.textContent.replace(/^ğŸ’¬\s*/,'').trim();
  if (!q || input.value === q) return;   // âœ… Î±Ï€Î¿Ï„ÏÎ­Ï€ÎµÎ¹ Î´Î¹Ï€Î»Î® Î±Ï€Î¿ÏƒÏ„Î¿Î»Î®

  input.value = q;
  // ÎšÎ±Î¸Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ· Î¼Î¹ÎºÏÎ® Î³Î¹Î± Î½Î± Î¼Î·Î½ ÏƒÏ„ÎµÎ¯Î»ÎµÎ¹ Î´ÏÎ¿ Ï†Î¿ÏÎ­Ï‚
  setTimeout(() => {
    form.dispatchEvent(new Event('submit', { bubbles: false }));
  }, 50);
});

document.addEventListener('click', (e) => {
  const title = e.target.closest('.card-header');
  if (!title) return;

  const content = title.parentElement.querySelector('.scenario-content');
  if (!content) return;

  content.classList.toggle('open');
  e.stopPropagation();
});




  </script>
</body>
</html>